(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,727612,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],727612)},330009,e=>{"use strict";let t;var a=e.i(843476),r=e.i(271645),i=e.i(30030),s=e.i(820783),n=e.i(326999),o=e.i(981140),l=Symbol("radix.slottable"),d="AlertDialog",[c,u]=(0,i.createContextScope)(d,[n.createDialogScope]),g=(0,n.createDialogScope)(),m=e=>{let{__scopeAlertDialog:t,...r}=e,i=g(t);return(0,a.jsx)(n.Root,{...i,...r,modal:!0})};m.displayName=d;var p=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=g(r);return(0,a.jsx)(n.Trigger,{...s,...i,ref:t})});p.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:t,...r}=e,i=g(t);return(0,a.jsx)(n.Portal,{...i,...r})};h.displayName="AlertDialogPortal";var f=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=g(r);return(0,a.jsx)(n.Overlay,{...s,...i,ref:t})});f.displayName="AlertDialogOverlay";var x="AlertDialogContent",[j,v]=c(x),y=((t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=l,t),b=r.forwardRef((e,t)=>{let{__scopeAlertDialog:i,children:l,...d}=e,c=g(i),u=r.useRef(null),m=(0,s.useComposedRefs)(t,u),p=r.useRef(null);return(0,a.jsx)(n.WarningProvider,{contentName:x,titleName:C,docsSlug:"alert-dialog",children:(0,a.jsx)(j,{scope:i,cancelRef:p,children:(0,a.jsxs)(n.Content,{role:"alertdialog",...c,...d,ref:m,onOpenAutoFocus:(0,o.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(y,{children:l}),(0,a.jsx)(k,{contentRef:u})]})})})});b.displayName=x;var C="AlertDialogTitle",D=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=g(r);return(0,a.jsx)(n.Title,{...s,...i,ref:t})});D.displayName=C;var w="AlertDialogDescription",N=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=g(r);return(0,a.jsx)(n.Description,{...s,...i,ref:t})});N.displayName=w;var A=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=g(r);return(0,a.jsx)(n.Close,{...s,...i,ref:t})});A.displayName="AlertDialogAction";var S="AlertDialogCancel",T=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:o}=v(S,r),l=g(r),d=(0,s.useComposedRefs)(t,o);return(0,a.jsx)(n.Close,{...l,...i,ref:d})});T.displayName=S;var k=({contentRef:e})=>{let t=`\`${x}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${x}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${x}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},z=e.i(647163),E=e.i(167881);function I({...e}){return(0,a.jsx)(m,{"data-slot":"alert-dialog",...e})}function R({...e}){return(0,a.jsx)(p,{"data-slot":"alert-dialog-trigger",...e})}function F({...e}){return(0,a.jsx)(h,{"data-slot":"alert-dialog-portal",...e})}function O({className:e,...t}){return(0,a.jsx)(f,{"data-slot":"alert-dialog-overlay",className:(0,z.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function L({className:e,...t}){return(0,a.jsxs)(F,{children:[(0,a.jsx)(O,{}),(0,a.jsx)(b,{"data-slot":"alert-dialog-content",className:(0,z.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function B({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,z.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function M({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,z.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function P({className:e,...t}){return(0,a.jsx)(D,{"data-slot":"alert-dialog-title",className:(0,z.cn)("text-lg font-semibold",e),...t})}function U({className:e,...t}){return(0,a.jsx)(N,{"data-slot":"alert-dialog-description",className:(0,z.cn)("text-muted-foreground text-sm",e),...t})}function H({className:e,...t}){return(0,a.jsx)(A,{className:(0,z.cn)((0,E.buttonVariants)(),e),...t})}function $({className:e,...t}){return(0,a.jsx)(T,{className:(0,z.cn)((0,E.buttonVariants)({variant:"outline"}),e),...t})}e.s(["AlertDialog",()=>I,"AlertDialogAction",()=>H,"AlertDialogCancel",()=>$,"AlertDialogContent",()=>L,"AlertDialogDescription",()=>U,"AlertDialogFooter",()=>M,"AlertDialogHeader",()=>B,"AlertDialogTitle",()=>P,"AlertDialogTrigger",()=>R],330009)},107233,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},10708,e=>{"use strict";var t=e.i(843476),a=e.i(271645);e.i(174080);var r=e.i(991918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,r.createSlot)(`Primitive.${i}`),n=a.forwardRef((e,a)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?s:i,{...n,ref:a})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{}),s=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var n=e.i(647163);function o({className:e,...a}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>o],10708)},630374,e=>{"use strict";var t=e.i(843476),a=e.i(326999),r=e.i(995926),i=e.i(647163);function s({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function o({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function l({className:e,...r}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function d({className:e,children:s,showCloseButton:n=!0,...d}){return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(l,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[s,n&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function g({className:e,...r}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...r})}function m({className:e,...r}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...r})}e.s(["Dialog",()=>s,"DialogContent",()=>d,"DialogDescription",()=>m,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>g,"DialogTrigger",()=>n])},688511,e=>{"use strict";let t=(0,e.i(475254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],688511)},704967,e=>{"use strict";function t(e){return!function(e){if(!e||"string"!=typeof e||!e.startsWith("data:image/"))return!1;let t=e.indexOf(",");if(-1===t)return!1;let a=e.substring(t+1);if(0===a.length)return!1;try{a.length>0&&atob(a.substring(0,Math.min(100,a.length)))}catch(e){return!1}return!0}(e)?null:e}e.s(["getValidImageUrl",()=>t])},190480,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(145645),i=e.i(948148),s=e.i(970065),n=e.i(167881),o=e.i(630374),l=e.i(330009),d=e.i(23750),c=e.i(10708),u=e.i(107233),g=e.i(607486),m=e.i(761911),p=e.i(688511),h=e.i(727612);let f=(0,e.i(475254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=e.i(120682),j=e.i(994179),v=e.i(704967);function y(){let{user:e}=(0,r.useUser)(),[o,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[v,y]=(0,a.useState)(!1),[D,w]=(0,a.useState)(null),[N,A]=(0,a.useState)(null),{toast:S}=(0,x.useToast)(),T=(0,i.useTranslations)("organizations");async function k(){try{let e=await fetch("/api/organizations");if(!e.ok)throw Error("Failed to fetch");let t=await e.json();d(t)}catch(e){S({title:"Erreur",description:"Impossible de charger les organisations",variant:"destructive"})}finally{u(!1)}}async function z(){if(N)try{if(!(await fetch(`/api/organizations/${N.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete");S({title:"Succès",description:"Organisation supprimée avec succès"}),A(null),k()}catch(e){S({title:"Erreur",description:"Impossible de supprimer l'organisation",variant:"destructive"})}}return((0,i.useTranslations)("common"),(0,a.useEffect)(()=>{e?.role==="PRO"&&k()},[e]),e?.role!=="PRO")?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:T("accessDenied")}),(0,t.jsx)(s.CardDescription,{children:T("accessDeniedDescription")})]})})}):(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:T("title")}),(0,t.jsx)("p",{className:"text-muted-foreground",children:T("subtitle")})]}),(0,t.jsx)(b,{open:v,onOpenChange:y,onSuccess:k})]}),c?(0,t.jsx)("div",{children:"Chargement..."}):(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[o.map(a=>{let r=a.accentColor||(a.logo?void 0:"#3b82f6");return(0,t.jsxs)(s.Card,{style:r?{borderColor:r,borderWidth:"2px"}:void 0,children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Building2,{className:"h-5 w-5"}),(0,t.jsx)(s.CardTitle,{children:a.name})]}),a.owner.id===e?.id&&(0,t.jsx)(j.Badge,{variant:"outline",children:T("owner")})]}),(0,t.jsxs)(s.CardDescription,{children:[T("owner"),": ",a.owner.name||a.owner.email]})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(m.Users,{className:"h-4 w-4"}),a.members.length," ",T("member"),a.members.length>1?"s":""]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/dashboard/organizations/${a.id}`,children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4"}),T("manage")]}),a.owner.id===e?.id&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>w(a),children:[(0,t.jsx)(p.Edit,{className:"mr-2 h-4 w-4"}),T("edit")]}),(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>A(a),children:[(0,t.jsx)(h.Trash2,{className:"mr-2 h-4 w-4"}),T("delete")]})]})]})]})})]},a.id)}),0===o.length&&(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:T("noOrganizations")}),(0,t.jsx)(s.CardDescription,{children:T("createFirst")})]})})]}),D&&(0,t.jsx)(C,{organization:D,onClose:()=>w(null),onSuccess:k}),(0,t.jsx)(l.AlertDialog,{open:!!N,onOpenChange:e=>!e&&A(null),children:(0,t.jsxs)(l.AlertDialogContent,{children:[(0,t.jsxs)(l.AlertDialogHeader,{children:[(0,t.jsx)(l.AlertDialogTitle,{children:"Supprimer l'organisation"}),(0,t.jsxs)(l.AlertDialogDescription,{children:['Êtes-vous sûr de vouloir supprimer "',N?.name,'" ? Cette action est irréversible.']})]}),(0,t.jsxs)(l.AlertDialogFooter,{children:[(0,t.jsx)(l.AlertDialogCancel,{children:"Annuler"}),(0,t.jsx)(l.AlertDialogAction,{onClick:z,children:"Supprimer"})]})]})})]})}function b({open:e,onOpenChange:r,onSuccess:i}){let[s,l]=(0,a.useState)(""),[g,m]=(0,a.useState)(""),[p,h]=(0,a.useState)("#3b82f6"),[f,j]=(0,a.useState)(!1),{toast:y}=(0,x.useToast)();async function b(e){let t=e.target.files?.[0];if(!t)return;if(t.size>2097152)return void y({title:"Erreur",description:"L'image ne doit pas dépasser 2MB",variant:"destructive"});if(!t.type.startsWith("image/"))return void y({title:"Erreur",description:"Le fichier doit être une image",variant:"destructive"});let a=new FileReader;a.onload=e=>{let t=e.target?.result,a=new Image;a.onload=()=>{let e=document.createElement("canvas");e.width=200,e.height=200;let t=e.getContext("2d");t&&(t.drawImage(a,0,0,200,200),m(e.toDataURL("image/png")))},a.src=t},a.readAsDataURL(t)}async function C(e){if(e.preventDefault(),s.trim()){j(!0);try{if(!(await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,logo:g||null,accentColor:p||null})})).ok)throw Error("Failed to create");y({title:"Succès",description:"Organisation créée avec succès"}),l(""),m(""),h("#3b82f6"),r(!1),i()}catch(e){y({title:"Erreur",description:"Impossible de créer l'organisation",variant:"destructive"})}finally{j(!1)}}}return(0,t.jsxs)(o.Dialog,{open:e,onOpenChange:r,children:[(0,t.jsx)(o.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{children:[(0,t.jsx)(u.Plus,{className:"mr-2 h-4 w-4"}),"Créer une organisation"]})}),(0,t.jsxs)(o.DialogContent,{children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"Créer une organisation"}),(0,t.jsx)(o.DialogDescription,{children:"Créez une nouvelle organisation pour regrouper des utilisateurs"})]}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"name",children:"Nom"}),(0,t.jsx)(d.Input,{id:"name",value:s,onChange:e=>l(e.target.value),placeholder:"Nom de l'organisation",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"logo",children:"Logo (optionnel)"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Input,{id:"logo-file",type:"file",accept:"image/*",onChange:b,className:"cursor-pointer"}),(0,v.getValidImageUrl)(g)&&(0,t.jsxs)("div",{className:"relative w-32 h-32 border rounded",children:[(0,t.jsx)("img",{src:(0,v.getValidImageUrl)(g),alt:"Logo preview",className:"w-full h-full object-contain rounded",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)(n.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute top-0 right-0",onClick:()=>m(""),children:"×"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"accentColor",children:"Couleur d'accentuation"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Input,{id:"accentColor",type:"color",value:p,onChange:e=>h(e.target.value),className:"w-20 h-10"}),(0,t.jsx)(d.Input,{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"#3b82f6",pattern:"^#[0-9A-Fa-f]{6}$"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Annuler"}),(0,t.jsx)(n.Button,{type:"submit",disabled:f,children:"Créer"})]})]})]})]})}function C({organization:e,onClose:r,onSuccess:i}){let[s,l]=(0,a.useState)(e.name),[u,g]=(0,a.useState)(e.logo||""),[m,p]=(0,a.useState)(e.accentColor||"#3b82f6"),[h,f]=(0,a.useState)(!1),{toast:j}=(0,x.useToast)();async function y(e){let t=e.target.files?.[0];if(!t)return;if(t.size>2097152)return void j({title:"Erreur",description:"L'image ne doit pas dépasser 2MB",variant:"destructive"});if(!t.type.startsWith("image/"))return void j({title:"Erreur",description:"Le fichier doit être une image",variant:"destructive"});let a=new FileReader;a.onload=e=>{let t=e.target?.result,a=new Image;a.onload=()=>{let e=document.createElement("canvas");e.width=200,e.height=200;let t=e.getContext("2d");t&&(t.drawImage(a,0,0,200,200),g(e.toDataURL("image/png")))},a.src=t},a.readAsDataURL(t)}async function b(t){if(t.preventDefault(),s.trim()){f(!0);try{if(!(await fetch(`/api/organizations/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,logo:u||null,accentColor:m||null})})).ok)throw Error("Failed to update");j({title:"Succès",description:"Organisation mise à jour avec succès"}),r(),i()}catch(e){j({title:"Erreur",description:"Impossible de mettre à jour l'organisation",variant:"destructive"})}finally{f(!1)}}}return(0,t.jsx)(o.Dialog,{open:!0,onOpenChange:e=>!e&&r(),children:(0,t.jsxs)(o.DialogContent,{children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"Modifier l'organisation"}),(0,t.jsx)(o.DialogDescription,{children:"Mettez à jour les informations de l'organisation"})]}),(0,t.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"name",children:"Nom"}),(0,t.jsx)(d.Input,{id:"name",value:s,onChange:e=>l(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"logo-edit",children:"Logo (optionnel)"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Input,{id:"logo-edit-file",type:"file",accept:"image/*",onChange:y,className:"cursor-pointer"}),(0,v.getValidImageUrl)(u)&&(0,t.jsxs)("div",{className:"relative w-32 h-32 border rounded",children:[(0,t.jsx)("img",{src:(0,v.getValidImageUrl)(u),alt:"Logo preview",className:"w-full h-full object-contain rounded",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)(n.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute top-0 right-0",onClick:()=>g(""),children:"×"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"accentColor-edit",children:"Couleur d'accentuation"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Input,{id:"accentColor-edit",type:"color",value:m||"#3b82f6",onChange:e=>p(e.target.value),className:"w-20 h-10"}),(0,t.jsx)(d.Input,{type:"text",value:m||"#3b82f6",onChange:e=>p(e.target.value),placeholder:"#3b82f6",pattern:"^#[0-9A-Fa-f]{6}$"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:r,children:"Annuler"}),(0,t.jsx)(n.Button,{type:"submit",disabled:h,children:"Enregistrer"})]})]})]})})}e.s(["default",()=>y],190480)}]);