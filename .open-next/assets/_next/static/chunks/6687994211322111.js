(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,531278,e=>{"use strict";var t=e.i(717521);e.s(["Loader2",()=>t.default])},555436,e=>{"use strict";let t=(0,e.i(475254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],555436)},107233,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},727612,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],727612)},330009,e=>{"use strict";let t;var r=e.i(843476),a=e.i(271645),s=e.i(30030),l=e.i(820783),i=e.i(326999),n=e.i(981140),o=Symbol("radix.slottable"),d="AlertDialog",[c,m]=(0,s.createContextScope)(d,[i.createDialogScope]),u=(0,i.createDialogScope)(),x=e=>{let{__scopeAlertDialog:t,...a}=e,s=u(t);return(0,r.jsx)(i.Root,{...s,...a,modal:!0})};x.displayName=d;var p=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=u(a);return(0,r.jsx)(i.Trigger,{...l,...s,ref:t})});p.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:t,...a}=e,s=u(t);return(0,r.jsx)(i.Portal,{...s,...a})};h.displayName="AlertDialogPortal";var g=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=u(a);return(0,r.jsx)(i.Overlay,{...l,...s,ref:t})});g.displayName="AlertDialogOverlay";var f="AlertDialogContent",[j,v]=c(f),y=((t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=o,t),N=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,children:o,...d}=e,c=u(s),m=a.useRef(null),x=(0,l.useComposedRefs)(t,m),p=a.useRef(null);return(0,r.jsx)(i.WarningProvider,{contentName:f,titleName:b,docsSlug:"alert-dialog",children:(0,r.jsx)(j,{scope:s,cancelRef:p,children:(0,r.jsxs)(i.Content,{role:"alertdialog",...c,...d,ref:x,onOpenAutoFocus:(0,n.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(y,{children:o}),(0,r.jsx)(k,{contentRef:m})]})})})});N.displayName=f;var b="AlertDialogTitle",w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=u(a);return(0,r.jsx)(i.Title,{...l,...s,ref:t})});w.displayName=b;var C="AlertDialogDescription",D=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=u(a);return(0,r.jsx)(i.Description,{...l,...s,ref:t})});D.displayName=C;var A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=u(a);return(0,r.jsx)(i.Close,{...l,...s,ref:t})});A.displayName="AlertDialogAction";var S="AlertDialogCancel",T=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=v(S,a),o=u(a),d=(0,l.useComposedRefs)(t,n);return(0,r.jsx)(i.Close,{...o,...s,ref:d})});T.displayName=S;var k=({contentRef:e})=>{let t=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${C}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},L=e.i(647163),R=e.i(167881);function M({...e}){return(0,r.jsx)(x,{"data-slot":"alert-dialog",...e})}function P({...e}){return(0,r.jsx)(p,{"data-slot":"alert-dialog-trigger",...e})}function I({...e}){return(0,r.jsx)(h,{"data-slot":"alert-dialog-portal",...e})}function O({className:e,...t}){return(0,r.jsx)(g,{"data-slot":"alert-dialog-overlay",className:(0,L.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function z({className:e,...t}){return(0,r.jsxs)(I,{children:[(0,r.jsx)(O,{}),(0,r.jsx)(N,{"data-slot":"alert-dialog-content",className:(0,L.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function E({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,L.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function F({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,L.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function V({className:e,...t}){return(0,r.jsx)(w,{"data-slot":"alert-dialog-title",className:(0,L.cn)("text-lg font-semibold",e),...t})}function $({className:e,...t}){return(0,r.jsx)(D,{"data-slot":"alert-dialog-description",className:(0,L.cn)("text-muted-foreground text-sm",e),...t})}function B({className:e,...t}){return(0,r.jsx)(A,{className:(0,L.cn)((0,R.buttonVariants)(),e),...t})}function U({className:e,...t}){return(0,r.jsx)(T,{className:(0,L.cn)((0,R.buttonVariants)({variant:"outline"}),e),...t})}e.s(["AlertDialog",()=>M,"AlertDialogAction",()=>B,"AlertDialogCancel",()=>U,"AlertDialogContent",()=>z,"AlertDialogDescription",()=>$,"AlertDialogFooter",()=>F,"AlertDialogHeader",()=>E,"AlertDialogTitle",()=>V,"AlertDialogTrigger",()=>P],330009)},87316,e=>{"use strict";let t=(0,e.i(475254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},286536,e=>{"use strict";let t=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},323585,e=>{"use strict";let t=(0,e.i(475254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],323585)},101797,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(522016),s=e.i(970065),l=e.i(167881),i=e.i(23750),n=e.i(994179),o=e.i(811522),d=e.i(62870),c=e.i(107233),m=e.i(512475),u=e.i(466141),x=e.i(555436),p=e.i(87316),h=e.i(284614),g=e.i(607486),f=e.i(323585),j=e.i(286536);let v=(0,e.i(475254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var y=e.i(727612),N=e.i(531278),b=e.i(178583),w=e.i(987756),C=e.i(948148),D=e.i(463415),A=e.i(330009),S=e.i(120682);function T(){let{toast:e}=(0,S.useToast)(),{activeOrganization:T}=(0,w.useOrganization)();(0,C.useTranslations)("trainings"),(0,C.useTranslations)("common");let[k,L]=(0,r.useState)(!0),[R,M]=(0,r.useState)([]),[P,I]=(0,r.useState)(""),[O,z]=(0,r.useState)("ALL"),[E,F]=(0,r.useState)(!1),[V,$]=(0,r.useState)(null),[B,U]=(0,r.useState)(!1),H=(0,r.useCallback)(async()=>{try{L(!0);let e=new URLSearchParams;T?.id&&e.append("organizationId",T.id);let t=await fetch(`/api/programs?${e.toString()}`);if(t.ok){let e=await t.json();M(e)}}catch(e){console.error("Error fetching programs:",e)}finally{L(!1)}},[T?.id]);(0,r.useEffect)(()=>{H()},[H]);let K=async()=>{if(V){U(!0);try{if((await fetch(`/api/programs/${V}`,{method:"DELETE"})).ok)e({title:"Programme supprimé",description:"Le programme a été supprimé"}),M(R.filter(e=>e.id!==V));else throw Error("Failed to delete")}catch(t){e({title:"Erreur",description:"Impossible de supprimer le programme",variant:"destructive"})}finally{U(!1),F(!1),$(null)}}},_=R.filter(e=>{let t=""===P||e.name.toLowerCase().includes(P.toLowerCase())||e.description&&e.description.toLowerCase().includes(P.toLowerCase()),r="ALL"===O||e.type===O;return t&&r}),q=_.filter(e=>"SPORT"===e.type),G=_.filter(e=>"NUTRITION"===e.type),J=({program:e})=>{let r="SPORT"===e.type?(e=>{try{let t=JSON.parse(e);return t.exercises?.length||0}catch{return 0}})(e.content):0,i="SPORT"===e.type;return(0,t.jsxs)(s.Card,{className:"group hover:border-primary/30 transition-all",children:[(0,t.jsx)(s.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${i?"bg-blue-500/10":"bg-green-500/10"}`,children:i?(0,t.jsx)(m.Dumbbell,{className:"h-5 w-5 text-blue-500"}):(0,t.jsx)(u.Apple,{className:"h-5 w-5 text-green-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{className:"text-lg",children:e.name}),(0,t.jsx)(n.Badge,{variant:i?"default":"secondary",className:"mt-1",children:i?"Sport":"Nutrition"})]})]}),(0,t.jsxs)(D.DropdownMenu,{children:[(0,t.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100",children:(0,t.jsx)(f.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(D.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(a.default,{href:`/dashboard/programs/${e.id}`,children:[(0,t.jsx)(j.Eye,{className:"h-4 w-4 mr-2"})," Voir"]})}),(0,t.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(a.default,{href:`/dashboard/programs/${e.id}/edit`,children:[(0,t.jsx)(v,{className:"h-4 w-4 mr-2"})," Modifier"]})}),(0,t.jsxs)(D.DropdownMenuItem,{className:"text-destructive",onClick:()=>{$(e.id),F(!0)},children:[(0,t.jsx)(y.Trash2,{className:"h-4 w-4 mr-2"})," Supprimer"]})]})]})]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[i&&r>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.Dumbbell,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[r," exercices"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Calendar,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})})]}),e.user&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.User,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.user.name||e.user.email})]})]}),e.organization&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,t.jsx)(g.Building2,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"px-2 py-0.5 rounded text-white",style:{backgroundColor:e.organization.accentColor||"#6b7280"},children:e.organization.name})]})]})]})};return k?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)(N.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(o.SidebarTrigger,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Programmes"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gérez vos programmes sportifs et nutritionnels"})]})]}),(0,t.jsx)(l.Button,{asChild:!0,children:(0,t.jsxs)(a.default,{href:"/dashboard/programs/builder",children:[(0,t.jsx)(c.Plus,{className:"h-4 w-4 mr-2"}),"Créer un programme"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-primary/10",children:(0,t.jsx)(b.FileText,{className:"h-6 w-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:R.length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total programmes"})]})]})})}),(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-blue-500/10",children:(0,t.jsx)(m.Dumbbell,{className:"h-6 w-6 text-blue-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:q.length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Programmes sportifs"})]})]})})}),(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-green-500/10",children:(0,t.jsx)(u.Apple,{className:"h-6 w-6 text-green-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:G.length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Programmes nutritionnels"})]})]})})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(x.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"Rechercher un programme...",value:P,onChange:e=>I(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(d.Select,{value:O,onValueChange:z,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,t.jsx)(d.SelectValue,{placeholder:"Type"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"ALL",children:"Tous les types"}),(0,t.jsx)(d.SelectItem,{value:"SPORT",children:"Sport"}),(0,t.jsx)(d.SelectItem,{value:"NUTRITION",children:"Nutrition"})]})]})]}),0===_.length?(0,t.jsx)(s.Card,{className:"py-12",children:(0,t.jsxs)(s.CardContent,{className:"flex flex-col items-center justify-center text-center",children:[(0,t.jsx)(b.FileText,{className:"h-12 w-12 text-muted-foreground/30 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Aucun programme"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:P||"ALL"!==O?"Aucun programme ne correspond à vos critères":"Créez votre premier programme pour commencer"}),!P&&"ALL"===O&&(0,t.jsx)(l.Button,{asChild:!0,children:(0,t.jsxs)(a.default,{href:"/dashboard/programs/builder",children:[(0,t.jsx)(c.Plus,{className:"h-4 w-4 mr-2"}),"Créer un programme"]})})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(e=>(0,t.jsx)(J,{program:e},e.id))}),(0,t.jsx)(A.AlertDialog,{open:E,onOpenChange:F,children:(0,t.jsxs)(A.AlertDialogContent,{children:[(0,t.jsxs)(A.AlertDialogHeader,{children:[(0,t.jsx)(A.AlertDialogTitle,{children:"Supprimer le programme ?"}),(0,t.jsx)(A.AlertDialogDescription,{children:"Cette action est irréversible. Le programme sera définitivement supprimé."})]}),(0,t.jsxs)(A.AlertDialogFooter,{children:[(0,t.jsx)(A.AlertDialogCancel,{disabled:B,children:"Annuler"}),(0,t.jsxs)(A.AlertDialogAction,{onClick:K,disabled:B,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[B?(0,t.jsx)(N.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):null,"Supprimer"]})]})]})})]})}e.s(["default",()=>T],101797)}]);