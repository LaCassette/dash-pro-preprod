(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,283086,e=>{"use strict";let r=(0,e.i(475254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>r],283086)},184762,e=>{"use strict";var r=e.i(843476),t=e.i(647163);function s({className:e,...s}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},531278,e=>{"use strict";var r=e.i(717521);e.s(["Loader2",()=>r.default])},471435,e=>{"use strict";var r=e.i(843476),t=e.i(271645),s=e.i(248425),l=e.i(296626),a=e.i(30030),n=e.i(820783),i=e.i(30207),o=e.i(586318),c=e.i(934620),d=e.i(470152),u=e.i(981140),p="ScrollArea",[h,m]=(0,a.createContextScope)(p),[f,x]=h(p),v=t.forwardRef((e,l)=>{let{__scopeScrollArea:a,type:i="hover",dir:c,scrollHideDelay:d=600,...u}=e,[p,h]=t.useState(null),[m,x]=t.useState(null),[v,g]=t.useState(null),[w,b]=t.useState(null),[j,y]=t.useState(null),[C,S]=t.useState(0),[N,E]=t.useState(0),[T,R]=t.useState(!1),[P,k]=t.useState(!1),L=(0,n.useComposedRefs)(l,e=>h(e)),A=(0,o.useDirection)(c);return(0,r.jsx)(f,{scope:a,type:i,dir:A,scrollHideDelay:d,scrollArea:p,viewport:m,onViewportChange:x,content:v,onContentChange:g,scrollbarX:w,onScrollbarXChange:b,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:j,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:k,onCornerWidthChange:S,onCornerHeightChange:E,children:(0,r.jsx)(s.Primitive.div,{dir:A,...u,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});v.displayName=p;var g="ScrollAreaViewport",w=t.forwardRef((e,l)=>{let{__scopeScrollArea:a,children:i,nonce:o,...c}=e,d=x(g,a),u=t.useRef(null),p=(0,n.useComposedRefs)(l,u,d.onViewportChange);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,r.jsx)(s.Primitive.div,{"data-radix-scroll-area-viewport":"",...c,ref:p,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,r.jsx)("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});w.displayName=g;var b="ScrollAreaScrollbar",j=t.forwardRef((e,s)=>{let{forceMount:l,...a}=e,n=x(b,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return t.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,r.jsx)(y,{...a,ref:s,forceMount:l}):"scroll"===n.type?(0,r.jsx)(C,{...a,ref:s,forceMount:l}):"auto"===n.type?(0,r.jsx)(S,{...a,ref:s,forceMount:l}):"always"===n.type?(0,r.jsx)(N,{...a,ref:s}):null});j.displayName=b;var y=t.forwardRef((e,s)=>{let{forceMount:a,...n}=e,i=x(b,e.__scopeScrollArea),[o,c]=t.useState(!1);return t.useEffect(()=>{let e=i.scrollArea,r=0;if(e){let t=()=>{window.clearTimeout(r),c(!0)},s=()=>{r=window.setTimeout(()=>c(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",t),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(r),e.removeEventListener("pointerenter",t),e.removeEventListener("pointerleave",s)}}},[i.scrollArea,i.scrollHideDelay]),(0,r.jsx)(l.Presence,{present:a||o,children:(0,r.jsx)(S,{"data-state":o?"visible":"hidden",...n,ref:s})})}),C=t.forwardRef((e,s)=>{var a;let{forceMount:n,...i}=e,o=x(b,e.__scopeScrollArea),c="horizontal"===e.orientation,d=W(()=>h("SCROLL_END"),100),[p,h]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},t.useReducer((e,r)=>a[e][r]??e,"hidden"));return t.useEffect(()=>{if("idle"===p){let e=window.setTimeout(()=>h("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[p,o.scrollHideDelay,h]),t.useEffect(()=>{let e=o.viewport,r=c?"scrollLeft":"scrollTop";if(e){let t=e[r],s=()=>{let s=e[r];t!==s&&(h("SCROLL"),d()),t=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[o.viewport,c,h,d]),(0,r.jsx)(l.Presence,{present:n||"hidden"!==p,children:(0,r.jsx)(N,{"data-state":"hidden"===p?"hidden":"visible",...i,ref:s,onPointerEnter:(0,u.composeEventHandlers)(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:(0,u.composeEventHandlers)(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),S=t.forwardRef((e,s)=>{let a=x(b,e.__scopeScrollArea),{forceMount:n,...i}=e,[o,c]=t.useState(!1),d="horizontal"===e.orientation,u=W(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,r=a.viewport.offsetHeight<a.viewport.scrollHeight;c(d?e:r)}},10);return $(a.viewport,u),$(a.content,u),(0,r.jsx)(l.Presence,{present:n||o,children:(0,r.jsx)(N,{"data-state":o?"visible":"hidden",...i,ref:s})})}),N=t.forwardRef((e,s)=>{let{orientation:l="vertical",...a}=e,n=x(b,e.__scopeScrollArea),i=t.useRef(null),o=t.useRef(0),[c,d]=t.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=z(c.viewport,c.content),p={...a,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,r){return function(e,r,t,s="ltr"){let l=U(t),a=r||l/2,n=t.scrollbar.paddingStart+a,i=t.scrollbar.size-t.scrollbar.paddingEnd-(l-a),o=t.content-t.viewport;return B([n,i],"ltr"===s?[0,o]:[-1*o,0])(e)}(e,o.current,c,r)}return"horizontal"===l?(0,r.jsx)(E,{...p,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=F(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===l?(0,r.jsx)(T,{...p,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=F(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),E=t.forwardRef((e,s)=>{let{sizes:l,onSizesChange:a,...i}=e,o=x(b,e.__scopeScrollArea),[c,d]=t.useState(),u=t.useRef(null),p=(0,n.useComposedRefs)(s,u,o.onScrollbarXChange);return t.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),(0,r.jsx)(k,{"data-orientation":"horizontal",...i,ref:p,sizes:l,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":U(l)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.x),onDragScroll:r=>e.onDragScroll(r.x),onWheelScroll:(r,t)=>{if(o.viewport){var s,l;let a=o.viewport.scrollLeft+r.deltaX;e.onWheelScroll(a),s=a,l=t,s>0&&s<l&&r.preventDefault()}},onResize:()=>{u.current&&o.viewport&&c&&a({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:O(c.paddingLeft),paddingEnd:O(c.paddingRight)}})}})}),T=t.forwardRef((e,s)=>{let{sizes:l,onSizesChange:a,...i}=e,o=x(b,e.__scopeScrollArea),[c,d]=t.useState(),u=t.useRef(null),p=(0,n.useComposedRefs)(s,u,o.onScrollbarYChange);return t.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),(0,r.jsx)(k,{"data-orientation":"vertical",...i,ref:p,sizes:l,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":U(l)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.y),onDragScroll:r=>e.onDragScroll(r.y),onWheelScroll:(r,t)=>{if(o.viewport){var s,l;let a=o.viewport.scrollTop+r.deltaY;e.onWheelScroll(a),s=a,l=t,s>0&&s<l&&r.preventDefault()}},onResize:()=>{u.current&&o.viewport&&c&&a({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:O(c.paddingTop),paddingEnd:O(c.paddingBottom)}})}})}),[R,P]=h(b),k=t.forwardRef((e,l)=>{let{__scopeScrollArea:a,sizes:o,hasThumb:c,onThumbChange:d,onThumbPointerUp:p,onThumbPointerDown:h,onThumbPositionChange:m,onDragScroll:f,onWheelScroll:v,onResize:g,...w}=e,j=x(b,a),[y,C]=t.useState(null),S=(0,n.useComposedRefs)(l,e=>C(e)),N=t.useRef(null),E=t.useRef(""),T=j.viewport,P=o.content-o.viewport,k=(0,i.useCallbackRef)(v),L=(0,i.useCallbackRef)(m),A=W(g,10);function D(e){N.current&&f({x:e.clientX-N.current.left,y:e.clientY-N.current.top})}return t.useEffect(()=>{let e=e=>{let r=e.target;y?.contains(r)&&k(e,P)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[T,y,P,k]),t.useEffect(L,[o,L]),$(y,A),$(j.content,A),(0,r.jsx)(R,{scope:a,scrollbar:y,hasThumb:c,onThumbChange:(0,i.useCallbackRef)(d),onThumbPointerUp:(0,i.useCallbackRef)(p),onThumbPositionChange:L,onThumbPointerDown:(0,i.useCallbackRef)(h),children:(0,r.jsx)(s.Primitive.div,{...w,ref:S,style:{position:"absolute",...w.style},onPointerDown:(0,u.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),N.current=y.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),D(e))}),onPointerMove:(0,u.composeEventHandlers)(e.onPointerMove,D),onPointerUp:(0,u.composeEventHandlers)(e.onPointerUp,e=>{let r=e.target;r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=E.current,j.viewport&&(j.viewport.style.scrollBehavior=""),N.current=null})})})}),L="ScrollAreaThumb",A=t.forwardRef((e,t)=>{let{forceMount:s,...a}=e,n=P(L,e.__scopeScrollArea);return(0,r.jsx)(l.Presence,{present:s||n.hasThumb,children:(0,r.jsx)(D,{ref:t,...a})})}),D=t.forwardRef((e,l)=>{let{__scopeScrollArea:a,style:i,...o}=e,c=x(L,a),d=P(L,a),{onThumbPositionChange:p}=d,h=(0,n.useComposedRefs)(l,e=>d.onThumbChange(e)),m=t.useRef(void 0),f=W(()=>{m.current&&(m.current(),m.current=void 0)},100);return t.useEffect(()=>{let e=c.viewport;if(e){let r=()=>{f(),m.current||(m.current=M(e,p),p())};return p(),e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[c.viewport,f,p]),(0,r.jsx)(s.Primitive.div,{"data-state":d.hasThumb?"visible":"hidden",...o,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:(0,u.composeEventHandlers)(e.onPointerDownCapture,e=>{let r=e.target.getBoundingClientRect(),t=e.clientX-r.left,s=e.clientY-r.top;d.onThumbPointerDown({x:t,y:s})}),onPointerUp:(0,u.composeEventHandlers)(e.onPointerUp,d.onThumbPointerUp)})});A.displayName=L;var I="ScrollAreaCorner",_=t.forwardRef((e,t)=>{let s=x(I,e.__scopeScrollArea),l=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&l?(0,r.jsx)(H,{...e,ref:t}):null});_.displayName=I;var H=t.forwardRef((e,l)=>{let{__scopeScrollArea:a,...n}=e,i=x(I,a),[o,c]=t.useState(0),[d,u]=t.useState(0),p=!!(o&&d);return $(i.scrollbarX,()=>{let e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),u(e)}),$(i.scrollbarY,()=>{let e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),c(e)}),p?(0,r.jsx)(s.Primitive.div,{...n,ref:l,style:{width:o,height:d,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function O(e){return e?parseInt(e,10):0}function z(e,r){let t=e/r;return isNaN(t)?0:t}function U(e){let r=z(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-t)*r,18)}function F(e,r,t="ltr"){let s=U(r),l=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,a=r.scrollbar.size-l,n=r.content-r.viewport,i=(0,d.clamp)(e,"ltr"===t?[0,n]:[-1*n,0]);return B([0,n],[0,a-s])(i)}function B(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];let s=(r[1]-r[0])/(e[1]-e[0]);return r[0]+s*(t-e[0])}}var M=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},s=0;return!function l(){let a={left:e.scrollLeft,top:e.scrollTop},n=t.left!==a.left,i=t.top!==a.top;(n||i)&&r(),t=a,s=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(s)};function W(e,r){let s=(0,i.useCallbackRef)(e),l=t.useRef(0);return t.useEffect(()=>()=>window.clearTimeout(l.current),[]),t.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(s,r)},[s,r])}function $(e,r){let t=(0,i.useCallbackRef)(r);(0,c.useLayoutEffect)(()=>{let r=0;if(e){let s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,t])}var X=e.i(647163);function Y({className:e,children:t,...s}){return(0,r.jsxs)(v,{"data-slot":"scroll-area",className:(0,X.cn)("relative",e),...s,children:[(0,r.jsx)(w,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,r.jsx)(G,{}),(0,r.jsx)(_,{})]})}function G({className:e,orientation:t="vertical",...s}){return(0,r.jsx)(j,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,X.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:(0,r.jsx)(A,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}e.s(["ScrollArea",()=>Y],471435)},620278,e=>{"use strict";let r=(0,e.i(475254).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>r],620278)},25652,e=>{"use strict";let r=(0,e.i(475254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>r],25652)},373375,e=>{"use strict";let r=(0,e.i(475254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>r],373375)},514764,e=>{"use strict";let r=(0,e.i(475254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>r],514764)},543383,e=>{"use strict";var r=e.i(843476),t=e.i(271645),s=e.i(618566),l=e.i(145645),a=e.i(120682),n=e.i(970065),i=e.i(167881),o=e.i(994179),c=e.i(184762),d=e.i(471435),u=e.i(62870),p=e.i(811522),h=e.i(686311),m=e.i(514764),f=e.i(283086),x=e.i(284614),v=e.i(882293),g=e.i(503116),w=e.i(373375),b=e.i(620278);let j=(0,e.i(475254).default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var y=e.i(25652),C=e.i(531278);let S={GENERAL:(0,r.jsx)(h.MessageSquare,{className:"h-4 w-4"}),FEEDBACK:(0,r.jsx)(y.TrendingUp,{className:"h-4 w-4"}),QUESTION:(0,r.jsx)(j,{className:"h-4 w-4"}),GOAL:(0,r.jsx)(b.Target,{className:"h-4 w-4"}),PROGRESS:(0,r.jsx)(y.TrendingUp,{className:"h-4 w-4"})},N={GENERAL:"G√©n√©ral",FEEDBACK:"Feedback",QUESTION:"Question",GOAL:"Objectif",PROGRESS:"Progr√®s",NUTRITION:"Nutrition",TRAINING:"Entra√Ænement"};function E(){let e=(0,s.useParams)(),b=(0,s.useRouter)(),{user:j}=(0,l.useUser)(),{toast:y}=(0,a.useToast)(),E=e.id,[T,R]=(0,t.useState)([]),[P,k]=(0,t.useState)(null),[L,A]=(0,t.useState)(!0),[D,I]=(0,t.useState)(!1),[_,H]=(0,t.useState)(!1),[O,z]=(0,t.useState)(""),[U,F]=(0,t.useState)("GENERAL"),[B,M]=(0,t.useState)(null),[W,$]=(0,t.useState)(null),X=(0,t.useCallback)(async()=>{if(E)try{let e=await fetch("/api/organizations");if(e.ok){let r=await e.json();if(r.length>0){$(r[0].id);let e=await fetch(`/api/coaching/${r[0].id}/notes/${E}`);if(e.ok){let r=await e.json();R(r)}}}let r=await fetch(`/api/users/${E}`);if(r.ok){let e=await r.json();k(e)}}catch(e){y({title:"Erreur",description:"Impossible de charger les donn√©es",variant:"destructive"})}finally{A(!1)}},[E,y]);(0,t.useEffect)(()=>{X()},[X]);let Y=async()=>{if(O.trim()&&W){I(!0);try{let e=await fetch(`/api/coaching/${W}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:parseInt(E),content:O,noteType:U})});if(!e.ok)throw Error("Failed to send note");let r=await e.json();R(e=>[r,...e]),z(""),y({title:"Note envoy√©e",description:"Votre note a √©t√© ajout√©e au suivi"})}catch(e){y({title:"Erreur",description:"Impossible d'envoyer la note",variant:"destructive"})}finally{I(!1)}}},G=async()=>{if(W){H(!0),M(null);try{let e=await fetch(`/api/coaching/${W}/analyze-program`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:parseInt(E)})});if(!e.ok)throw Error("Failed to analyze");let r=await e.json();M(r.analysis),y({title:"Analyse termin√©e",description:"La proposition de programme est pr√™te"})}catch(e){y({title:"Erreur",description:"Impossible d'analyser les √©changes",variant:"destructive"})}finally{H(!1)}}};return j?.role!=="PRO"?(0,r.jsx)("div",{className:"container mx-auto p-6",children:(0,r.jsx)(n.Card,{children:(0,r.jsxs)(n.CardHeader,{children:[(0,r.jsx)(n.CardTitle,{children:"Acc√®s refus√©"}),(0,r.jsx)(n.CardDescription,{children:"Cette page est r√©serv√©e aux professionnels."})]})})}):(0,r.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(p.SidebarTrigger,{}),(0,r.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>b.back(),children:(0,r.jsx)(w.ChevronLeft,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:["Suivi de ",P?.name||P?.email||"Client"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Timeline des √©changes et notes de coaching"})]})]}),(0,r.jsxs)(i.Button,{onClick:G,disabled:_||0===T.length,className:"bg-gradient-to-r from-purple-500 to-pink-500",children:[_?(0,r.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(f.Sparkles,{className:"mr-2 h-4 w-4"}),"Analyser et Proposer Programme"]})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{className:"pb-3",children:(0,r.jsx)(n.CardTitle,{className:"text-lg",children:"Ajouter une note"})}),(0,r.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)(u.Select,{value:U,onValueChange:F,children:[(0,r.jsx)(u.SelectTrigger,{className:"w-[160px]",children:(0,r.jsx)(u.SelectValue,{})}),(0,r.jsx)(u.SelectContent,{children:Object.entries(N).map(([e,t])=>(0,r.jsx)(u.SelectItem,{value:e,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[S[e]||(0,r.jsx)(h.MessageSquare,{className:"h-4 w-4"}),t]})},e))})]})}),(0,r.jsx)(c.Textarea,{placeholder:"√âcrivez une note de suivi...",value:O,onChange:e=>z(e.target.value),rows:3}),(0,r.jsxs)(i.Button,{onClick:Y,disabled:D||!O.trim(),className:"w-full",children:[D?(0,r.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(m.Send,{className:"mr-2 h-4 w-4"}),"Envoyer la note"]})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{children:[(0,r.jsx)(n.CardTitle,{children:"Timeline du suivi"}),(0,r.jsxs)(n.CardDescription,{children:[T.length," note",1!==T.length?"s":""]})]}),(0,r.jsx)(n.CardContent,{children:L?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(C.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===T.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(h.MessageSquare,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"Aucune note de suivi pour l'instant"}),(0,r.jsx)("p",{className:"text-sm",children:"Commencez par envoyer une note ci-dessus"})]}):(0,r.jsx)(d.ScrollArea,{className:"h-[500px] pr-4",children:(0,r.jsx)("div",{className:"space-y-4",children:T.map(e=>(0,r.jsxs)("div",{className:`flex gap-3 ${e.isFromCoach?"":"flex-row-reverse"}`,children:[(0,r.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${e.isFromCoach?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.isFromCoach?(0,r.jsx)(v.UserCheck,{className:"h-4 w-4"}):(0,r.jsx)(x.User,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:`flex-1 max-w-[80%] ${e.isFromCoach?"":"text-right"}`,children:[(0,r.jsxs)("div",{className:`inline-block p-3 rounded-lg ${e.isFromCoach?"bg-primary/10 text-left":"bg-muted text-left"}`,children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,r.jsx)(o.Badge,{variant:"outline",className:"text-xs",children:N[e.noteType]||e.noteType})}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[(0,r.jsx)(g.Clock,{className:"h-3 w-3"}),new Date(e.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]})]})]},e.id))})})})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{children:[(0,r.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Sparkles,{className:"h-5 w-5 text-purple-500"}),"Analyse IA"]}),(0,r.jsx)(n.CardDescription,{children:"Propositions bas√©es sur les √©changes r√©cents"})]}),(0,r.jsx)(n.CardContent,{children:_?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,r.jsx)(C.Loader2,{className:"h-8 w-8 animate-spin text-purple-500 mb-4"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analyse en cours..."})]}):B?(0,r.jsx)(d.ScrollArea,{className:"h-[400px]",children:(0,r.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:B.replace(/\n/g,"<br>")}})})}):(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(f.Sparkles,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:'Cliquez sur "Analyser et Proposer Programme"'}),(0,r.jsx)("p",{className:"text-sm mt-2",children:"L'IA analysera les √©changes et proposera des modifications au programme"})]})})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsx)(n.CardTitle,{children:"Actions rapides"})}),(0,r.jsxs)(n.CardContent,{className:"space-y-2",children:[(0,r.jsx)(i.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>b.push(`/dashboard/clients/${E}/measurements`),children:"üìä Voir les mensurations"}),(0,r.jsx)(i.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>b.push(`/dashboard/clients/${E}/sessions`),children:"üèãÔ∏è G√©rer les sessions"}),(0,r.jsx)(i.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>b.push("/dashboard/programs"),children:"üìã Voir les programmes"})]})]})]})]})]})}e.s(["default",()=>E],543383)}]);