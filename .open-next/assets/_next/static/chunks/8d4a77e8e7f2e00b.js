(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},10708,e=>{"use strict";var t=e.i(843476),a=e.i(271645);e.i(174080);var s=e.i(991918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let n=(0,s.createSlot)(`Primitive.${i}`),r=a.forwardRef((e,a)=>{let{asChild:s,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?n:i,{...r,ref:a})});return r.displayName=`Primitive.${i}`,{...e,[i]:r}},{}),n=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var r=e.i(647163);function o({className:e,...a}){return(0,t.jsx)(n,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>o],10708)},630374,e=>{"use strict";var t=e.i(843476),a=e.i(326999),s=e.i(995926),i=e.i(647163);function n({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function r({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function o({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function l({className:e,...s}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function d({className:e,children:n,showCloseButton:r=!0,...d}){return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(l,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[n,r&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(s.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function g({className:e,...s}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...s})}function m({className:e,...s}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...s})}e.s(["Dialog",()=>n,"DialogContent",()=>d,"DialogDescription",()=>m,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>g,"DialogTrigger",()=>r])},528754,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(145645),i=e.i(970065),n=e.i(167881),r=e.i(630374),o=e.i(23750),l=e.i(10708),d=e.i(107233),c=e.i(607486),u=e.i(120682);function g(){let{user:e}=(0,s.useUser)(),[n,r]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[d,g]=(0,a.useState)(!1),{toast:x}=(0,u.useToast)();async function p(){try{let e=await fetch("/api/organizations");if(!e.ok)throw Error("Failed to fetch");let t=await e.json();r(t)}catch(e){x({title:"Erreur",description:"Impossible de charger les organisations",variant:"destructive"})}finally{l(!1)}}return((0,a.useEffect)(()=>{e?.role==="ADMIN"&&p()},[e]),e?.role!=="ADMIN")?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Accès refusé"}),(0,t.jsx)(i.CardDescription,{children:"Vous devez être administrateur pour accéder à cette page."})]})})}):(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Gestion des Organisations"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gérez toutes les organisations de la plateforme"})]}),(0,t.jsx)(m,{open:d,onOpenChange:g,onSuccess:p})]}),o?(0,t.jsx)("div",{children:"Chargement..."}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(e=>(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Building2,{className:"h-5 w-5"}),(0,t.jsx)(i.CardTitle,{children:e.name})]}),(0,t.jsxs)(i.CardDescription,{children:["Propriétaire: ",e.owner.name||e.owner.email]})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.members.length," membre",e.members.length>1?"s":""]})})]},e.id))})]})}function m({open:e,onOpenChange:s,onSuccess:i}){let[c,g]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),{toast:p}=(0,u.useToast)();async function f(e){if(e.preventDefault(),c.trim()){x(!0);try{if(!(await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c})})).ok)throw Error("Failed to create");p({title:"Succès",description:"Organisation créée avec succès"}),g(""),s(!1),i()}catch(e){p({title:"Erreur",description:"Impossible de créer l'organisation",variant:"destructive"})}finally{x(!1)}}}return(0,t.jsxs)(r.Dialog,{open:e,onOpenChange:s,children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{children:[(0,t.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Créer une organisation"]})}),(0,t.jsxs)(r.DialogContent,{children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Créer une organisation"}),(0,t.jsx)(r.DialogDescription,{children:"Créez une nouvelle organisation pour regrouper des utilisateurs"})]}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"name",children:"Nom"}),(0,t.jsx)(o.Input,{id:"name",value:c,onChange:e=>g(e.target.value),placeholder:"Nom de l'organisation",required:!0})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Annuler"}),(0,t.jsx)(n.Button,{type:"submit",disabled:m,children:"Créer"})]})]})]})]})}e.s(["default",()=>g])}]);