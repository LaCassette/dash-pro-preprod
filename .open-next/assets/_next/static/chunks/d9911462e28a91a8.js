(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,284614,e=>{"use strict";let s=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],284614)},882293,e=>{"use strict";let s=(0,e.i(475254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCheck",()=>s],882293)},82306,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(618566),a=e.i(970065),i=e.i(167881),o=e.i(416540),n=e.i(10708),c=e.i(120682),l=e.i(531278),d=e.i(284614),m=e.i(882293),u=e.i(522016);function p(){let e=(0,r.useRouter)(),p=(0,r.useSearchParams)(),{toast:h}=(0,c.useToast)(),[x,g]=(0,t.useState)("USER"),[f,j]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(p.get("code"))try{let s=await fetch("/api/auth/sync",{method:"POST"});if(s.ok){let{user:t}=await s.json();document.cookie="signup_role=; max-age=0; path=/",document.cookie="signup_referral_code=; max-age=0; path=/";let r=sessionStorage.getItem("signup_role");"PRO"===r?(await fetch("/api/auth/setup-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:"PRO"})})).ok&&(sessionStorage.removeItem("signup_role"),h({title:"Compte PRO créé",description:"Votre compte est en attente de validation par un administrateur."})):h({title:"Bienvenue !",description:"Votre compte a été créé avec succès."}),e.push("/dashboard")}}catch(e){console.error("Error syncing user:",e)}})()},[p,e,h]),(0,t.useEffect)(()=>{let e=p.get("ref");e&&(document.cookie=`signup_referral_code=${e}; max-age=3600; path=/; SameSite=Lax`,console.log("Referral code captured:",e))},[p]);let v=async()=>{j(!0);try{"PRO"===x?(sessionStorage.setItem("signup_role","PRO"),document.cookie="signup_role=PRO; max-age=3600; path=/; SameSite=Lax"):document.cookie="signup_role=USER; max-age=3600; path=/; SameSite=Lax",window.location.href="/api/auth/login?screen_hint=signup"}catch(e){console.error("Error during signup:",e),h({title:"Erreur",description:"Une erreur est survenue lors de l'inscription",variant:"destructive"}),j(!1)}};return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4",children:(0,s.jsxs)(a.Card,{className:"w-full max-w-md",children:[(0,s.jsxs)(a.CardHeader,{className:"text-center",children:[(0,s.jsx)(a.CardTitle,{className:"text-3xl font-bold",children:"Créer un compte"}),(0,s.jsx)(a.CardDescription,{children:"Choisissez le type de compte qui correspond à vos besoins"})]}),(0,s.jsxs)(a.CardContent,{className:"space-y-6",children:[(0,s.jsxs)(o.RadioGroup,{value:x,onValueChange:e=>g(e),children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3 rounded-lg border p-4 hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(o.RadioGroupItem,{value:"USER",id:"user",className:"mt-1"}),(0,s.jsxs)(n.Label,{htmlFor:"user",className:"flex-1 cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(d.User,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"Utilisateur"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Accédez aux programmes sportifs et nutritionnels créés par vos coachs. Accès immédiat après inscription."})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3 rounded-lg border p-4 hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(o.RadioGroupItem,{value:"PRO",id:"pro",className:"mt-1"}),(0,s.jsxs)(n.Label,{htmlFor:"pro",className:"flex-1 cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(m.UserCheck,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"Professionnel"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Créez des programmes personnalisés pour vos clients, gérez votre activité.",(0,s.jsx)("span",{className:"block mt-1 font-medium text-foreground",children:"⚠️ Votre compte sera en attente de validation par un administrateur."})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(i.Button,{onClick:v,disabled:f,className:"w-full",size:"lg",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Redirection..."]}):"Continuer avec Auth0"}),(0,s.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["Vous avez déjà un compte ?"," ",(0,s.jsx)(u.default,{href:"/api/auth/login",className:"text-primary hover:underline",children:"Se connecter"})]})]}),"PRO"===x&&(0,s.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[(0,s.jsx)("p",{className:"font-semibold mb-2",children:"Information importante :"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[(0,s.jsx)("li",{children:'Votre compte sera créé avec le statut "En attente"'}),(0,s.jsx)("li",{children:"Vous pourrez configurer votre dashboard pendant l'attente"}),(0,s.jsx)("li",{children:"La création d'organisations sera désactivée jusqu'à validation"}),(0,s.jsx)("li",{children:"Un administrateur validera votre compte sous 24-48h"})]})]})]})]})})}function h(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin"})}),children:(0,s.jsx)(p,{})})}e.s(["default",()=>h])}]);