(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,531278,e=>{"use strict";var s=e.i(717521);e.s(["Loader2",()=>s.default])},620278,e=>{"use strict";let s=(0,e.i(475254).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>s],620278)},688511,e=>{"use strict";let s=(0,e.i(475254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],688511)},871689,e=>{"use strict";let s=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],871689)},996781,e=>{"use strict";let s=(0,e.i(475254).default)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);e.s(["Repeat",()=>s],996781)},750570,e=>{"use strict";let s=(0,e.i(475254).default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>s],750570)},632893,e=>{"use strict";var s=e.i(843476),r=e.i(271645),t=e.i(618566),a=e.i(145645),l=e.i(970065),i=e.i(167881),c=e.i(994179),d=e.i(871689),n=e.i(512475),o=e.i(466141),m=e.i(531278),x=e.i(688511),u=e.i(750570),p=e.i(503116),h=e.i(620278),g=e.i(996781),f=e.i(918789),j=e.i(742531),b=e.i(120682),y=e.i(811522);let N={CHEST:"Pectoraux",BACK:"Dos",SHOULDERS:"Ã‰paules",BICEPS:"Biceps",TRICEPS:"Triceps",FOREARMS:"Avant-bras",ABS:"Abdos",OBLIQUES:"Obliques",QUADRICEPS:"Quadriceps",HAMSTRINGS:"Ischio-jambiers",GLUTES:"Fessiers",CALVES:"Mollets",LOWER_BACK:"Lombaires",TRAPS:"TrapÃ¨zes",FULL_BODY:"Full Body",CARDIO:"Cardio",STRETCHING:"Ã‰tirements"},v={CHEST:"bg-red-500",BACK:"bg-blue-500",SHOULDERS:"bg-orange-500",BICEPS:"bg-purple-500",TRICEPS:"bg-pink-500",FOREARMS:"bg-amber-500",ABS:"bg-green-500",OBLIQUES:"bg-lime-500",QUADRICEPS:"bg-cyan-500",HAMSTRINGS:"bg-teal-500",GLUTES:"bg-rose-500",CALVES:"bg-sky-500",LOWER_BACK:"bg-indigo-500",TRAPS:"bg-violet-500",FULL_BODY:"bg-gray-500",CARDIO:"bg-red-400",STRETCHING:"bg-emerald-500"};function w(){let e=(0,t.useParams)(),w=(0,t.useRouter)(),{user:S}=(0,a.useUser)(),{toast:k}=(0,b.useToast)(),[C,E]=(0,r.useState)(null),[A,R]=(0,r.useState)(!0);async function B(e){R(!0);try{let s=await fetch(`/api/programs/${e}`);if(!s.ok){if(404===s.status){k({title:"Erreur",description:"Programme non trouvÃ©",variant:"destructive"}),w.push("/dashboard");return}throw Error("Failed to fetch program")}let r=await s.json();E(r)}catch(e){console.error("Error fetching program:",e),k({title:"Erreur",description:"Impossible de charger le programme",variant:"destructive"}),w.push("/dashboard")}finally{R(!1)}}(0,r.useEffect)(()=>{e.id&&B(e.id)},[e.id]);let T=(0,r.useMemo)(()=>{if(!C)return null;try{let e=JSON.parse(C.content);if(e.exercises&&Array.isArray(e.exercises))return{type:"exercises",exercises:e.exercises};return{type:"json",data:e}}catch{return{type:"markdown"}}},[C?.content]),L=(0,r.useMemo)(()=>{if(T?.type!=="exercises")return null;let e={};return T.exercises.forEach(s=>{let r=s.muscleGroup||"OTHER";e[r]||(e[r]=[]),e[r].push(s)}),e},[T]);if(A)return(0,s.jsx)("div",{className:"container mx-auto p-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin"})})});if(!C)return null;let O="SPORT"===C.type,I=S?.id===C.createdBy.id,P=({exercise:e,index:r})=>{let t=v[e.muscleGroup]||"bg-gray-500";return(0,s.jsxs)("div",{className:"group flex items-start gap-4 p-4 rounded-lg border bg-card hover:border-primary/30 transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm",children:r+1}),(0,s.jsx)(u.GripVertical,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("h4",{className:"font-semibold text-lg",children:e.name}),(0,s.jsx)(c.Badge,{className:`${t} text-white text-xs`,children:N[e.muscleGroup]||e.muscleGroup})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,s.jsx)(g.Repeat,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:e.series})," sÃ©ries Ã— ",(0,s.jsx)("strong",{children:e.reps})," reps"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,s.jsx)(p.Clock,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Repos: ",(0,s.jsx)("strong",{children:e.rest})]})]})]}),e.notes&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground italic",children:["ðŸ“ ",e.notes]})]})]})};return(0,s.jsx)("div",{className:"w-full min-w-0 p-6",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto w-full min-w-0",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(y.SidebarTrigger,{}),(0,s.jsxs)(i.Button,{variant:"ghost",onClick:()=>w.back(),children:[(0,s.jsx)(d.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Retour"]})]}),(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[O?(0,s.jsx)(n.Dumbbell,{className:"h-6 w-6"}):(0,s.jsx)(o.Apple,{className:"h-6 w-6"}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:C.name})]}),C.description&&(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:C.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(c.Badge,{variant:O?"default":"secondary",children:O?"Sportif":"Nutritionnel"}),C.user&&(0,s.jsxs)(c.Badge,{variant:"outline",children:["Pour: ",C.user.name||C.user.email]}),C.organization&&(0,s.jsx)(c.Badge,{variant:"outline",children:C.organization.name})]})]}),I&&(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(i.Button,{variant:"outline",onClick:()=>w.push(`/dashboard/programs/${C.id}/edit`),children:[(0,s.jsx)(x.Edit,{className:"mr-2 h-4 w-4"}),"Modifier"]})})]})]}),(0,s.jsxs)(l.Card,{className:"w-full",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.CardTitle,{children:T?.type==="exercises"?"Programme d'entraÃ®nement":"Contenu du programme"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["CrÃ©Ã© le ",new Date(C.createdAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),C.updatedAt!==C.createdAt&&(0,s.jsxs)("span",{className:"ml-2",children:["(Mis Ã  jour le ",new Date(C.updatedAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),")"]})]})]}),C.createdBy&&(0,s.jsxs)(l.CardDescription,{children:["CrÃ©Ã© par: ",C.createdBy.name||C.createdBy.email]})]}),(0,s.jsx)(l.CardContent,{className:"w-full p-6 min-w-0",children:(()=>{if(!T)return null;if("exercises"===T.type){let e=T.exercises.length,r=T.exercises.reduce((e,s)=>e+(s.series||0),0),t=[...new Set(T.exercises.map(e=>e.muscleGroup))];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-4 rounded-lg bg-muted/30",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-primary",children:e}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Exercices"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-primary",children:r}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"SÃ©ries totales"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-primary",children:t.length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Groupes musculaires"})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,s.jsxs)(c.Badge,{variant:"outline",className:"flex items-center gap-1",children:[(0,s.jsx)(h.Target,{className:"h-3 w-3"}),N[e]||e]},e))}),L&&Object.entries(L).map(([e,r])=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"flex items-center gap-2 text-lg font-semibold",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${v[e]||"bg-gray-500"}`}),N[e]||e,(0,s.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:r.length})]}),(0,s.jsx)("div",{className:"space-y-2 pl-5",children:r.sort((e,s)=>e.order-s.order).map((e,r)=>(0,s.jsx)(P,{exercise:e,index:r},`${e.exerciseId||e.name}-${r}`))})]},e))]})}return(0,s.jsx)("div",{className:"prose prose-sm max-w-none dark:prose-invert w-full min-w-0",children:(0,s.jsx)(f.default,{remarkPlugins:[j.default],components:{h1:({node:e,...r})=>(0,s.jsx)("h1",{className:"text-2xl font-bold mt-6 mb-4",...r}),h2:({node:e,...r})=>(0,s.jsx)("h2",{className:"text-xl font-semibold mt-5 mb-3",...r}),h3:({node:e,...r})=>(0,s.jsx)("h3",{className:"text-lg font-semibold mt-4 mb-2",...r}),p:({node:e,...r})=>(0,s.jsx)("p",{className:"mb-4 leading-relaxed",...r}),ul:({node:e,...r})=>(0,s.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-2",...r}),ol:({node:e,...r})=>(0,s.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-2",...r}),li:({node:e,...r})=>(0,s.jsx)("li",{className:"ml-4",...r}),strong:({node:e,...r})=>(0,s.jsx)("strong",{className:"font-semibold",...r}),code:({node:e,inline:r,...t})=>r?(0,s.jsx)("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...t}):(0,s.jsx)("code",{className:"block bg-muted p-4 rounded-lg text-sm font-mono overflow-x-auto mb-4",...t}),blockquote:({node:e,...r})=>(0,s.jsx)("blockquote",{className:"border-l-4 border-primary pl-4 italic my-4",...r}),table:({node:e,children:r,...t})=>(0,s.jsx)("div",{className:"my-6 w-full overflow-x-auto",style:{WebkitOverflowScrolling:"touch",overflowX:"auto",display:"block",width:"100%"},children:(0,s.jsx)("table",{className:"border-collapse text-sm border rounded-lg bg-card",style:{width:"max-content",display:"table",margin:0},...t,children:r})}),thead:({node:e,...r})=>(0,s.jsx)("thead",{className:"bg-muted/50",...r}),tbody:({node:e,...r})=>(0,s.jsx)("tbody",{className:"divide-y divide-border",...r}),tr:({node:e,...r})=>(0,s.jsx)("tr",{className:"border-b border-border hover:bg-muted/30 transition-colors",...r}),th:({node:e,...r})=>(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-foreground whitespace-nowrap border-b border-border",style:{whiteSpace:"nowrap"},...r}),td:({node:e,...r})=>(0,s.jsx)("td",{className:"px-4 py-2.5 text-foreground border-b border-border/50",style:{whiteSpace:"nowrap"},...r})},children:C.content})})})()})]})]})})}e.s(["default",()=>w])}]);