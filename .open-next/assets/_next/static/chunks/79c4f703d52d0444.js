(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,531278,e=>{"use strict";var r=e.i(717521);e.s(["Loader2",()=>r.default])},373884,e=>{"use strict";let r=(0,e.i(475254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>r],373884)},745776,e=>{"use strict";var r=e.i(843476),s=e.i(271645),a=e.i(145645),t=e.i(970065),i=e.i(167881),l=e.i(994179),n=e.i(120682),d=e.i(882293);let c=(0,e.i(475254).default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var o=e.i(531278),x=e.i(503116),m=e.i(269638),h=e.i(373884),p=e.i(63270);function j(){let{user:e}=(0,a.useUser)(),{toast:j}=(0,n.useToast)(),[u,f]=(0,s.useState)([]),[v,g]=(0,s.useState)(!0),[N,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{e?.role==="ADMIN"&&y()},[e]);let y=async()=>{try{let e=await fetch("/api/admin/pros");if(!e.ok)throw Error("Failed to fetch");let r=await e.json();f(r)}catch(e){console.error("Error fetching pending pros:",e),j({title:"Erreur",description:"Impossible de charger les professionnels en attente",variant:"destructive"})}finally{g(!1)}},b=async e=>{C(e);try{if(!(await fetch(`/api/admin/pros/${e}/approve`,{method:"POST"})).ok)throw Error("Failed to approve");j({title:"Succès",description:"Le professionnel a été approuvé avec succès"}),y()}catch(e){console.error("Error approving pro:",e),j({title:"Erreur",description:"Impossible d'approuver le professionnel",variant:"destructive"})}finally{C(null)}},A=async e=>{C(e);try{if(!(await fetch(`/api/admin/pros/${e}/reject`,{method:"POST"})).ok)throw Error("Failed to reject");j({title:"Succès",description:"Le professionnel a été rejeté"}),y()}catch(e){console.error("Error rejecting pro:",e),j({title:"Erreur",description:"Impossible de rejeter le professionnel",variant:"destructive"})}finally{C(null)}};if(e?.role!=="ADMIN")return(0,r.jsx)("div",{className:"container mx-auto p-6",children:(0,r.jsx)(t.Card,{children:(0,r.jsxs)(t.CardHeader,{children:[(0,r.jsx)(t.CardTitle,{children:"Accès refusé"}),(0,r.jsx)(t.CardDescription,{children:"Vous devez être administrateur pour accéder à cette page."})]})})});if(v)return(0,r.jsx)("div",{className:"container mx-auto p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});let k=u.filter(e=>"PENDING"===e.proStatus),w=u.filter(e=>"ACTIVE"===e.proStatus),E=u.filter(e=>"REJECTED"===e.proStatus);return(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Validation des Professionnels"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Validez ou rejetez les demandes d'accès professionnel"})]}),(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)(t.Card,{children:[(0,r.jsxs)(t.CardHeader,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.Clock,{className:"h-5 w-5"}),(0,r.jsxs)(t.CardTitle,{children:["En attente (",k.length,")"]})]}),(0,r.jsx)(t.CardDescription,{children:"Professionnels en attente de validation"})]}),(0,r.jsx)(t.CardContent,{children:0===k.length?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun professionnel en attente"}):(0,r.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(p.Avatar,{children:[(0,r.jsx)(p.AvatarImage,{src:e.picture||void 0}),(0,r.jsx)(p.AvatarFallback,{children:e.name?.charAt(0).toUpperCase()||e.email.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:e.name||"Sans nom"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Inscrit le ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>A(e.id),disabled:N===e.id,children:N===e.id?(0,r.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{className:"h-4 w-4 mr-2"}),"Rejeter"]})}),(0,r.jsx)(i.Button,{size:"sm",onClick:()=>b(e.id),disabled:N===e.id,children:N===e.id?(0,r.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.UserCheck,{className:"h-4 w-4 mr-2"}),"Approuver"]})})]})]},e.id))})})]}),w.length>0&&(0,r.jsxs)(t.Card,{children:[(0,r.jsx)(t.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.CheckCircle,{className:"h-5 w-5 text-green-500"}),(0,r.jsxs)(t.CardTitle,{children:["Approuvés (",w.length,")"]})]})}),(0,r.jsx)(t.CardContent,{children:(0,r.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(p.Avatar,{className:"h-8 w-8",children:[(0,r.jsx)(p.AvatarImage,{src:e.picture||void 0}),(0,r.jsx)(p.AvatarFallback,{children:e.name?.charAt(0).toUpperCase()||e.email.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.name||"Sans nom"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.email})]})]}),(0,r.jsx)(l.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-800",children:"Actif"})]},e.id))})})]}),E.length>0&&(0,r.jsxs)(t.Card,{children:[(0,r.jsx)(t.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.XCircle,{className:"h-5 w-5 text-red-500"}),(0,r.jsxs)(t.CardTitle,{children:["Rejetés (",E.length,")"]})]})}),(0,r.jsx)(t.CardContent,{children:(0,r.jsx)("div",{className:"space-y-2",children:E.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(p.Avatar,{className:"h-8 w-8",children:[(0,r.jsx)(p.AvatarImage,{src:e.picture||void 0}),(0,r.jsx)(p.AvatarFallback,{children:e.name?.charAt(0).toUpperCase()||e.email.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.name||"Sans nom"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.email})]})]}),(0,r.jsx)(l.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 dark:bg-red-950 dark:text-red-300 dark:border-red-800",children:"Rejeté"})]},e.id))})})]})]})]})}e.s(["default",()=>j],745776)}]);