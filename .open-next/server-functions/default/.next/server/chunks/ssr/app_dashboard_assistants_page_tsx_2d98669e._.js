module.exports=[684866,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(278165),f=a.i(703130),g=a.i(340695),h=a.i(965733),i=a.i(205522),j=a.i(917171),k=a.i(546893),l=a.i(182434),m=a.i(915618),n=a.i(808406),o=a.i(587532),p=a.i(369012),q=a.i(669520),r=a.i(277687),s=a.i(254161),t=a.i(807706),u=a.i(676504),v=a.i(563588),w=a.i(879360),x=a.i(824569),y=a.i(781560);let z=(0,a.i(170106).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var A=a.i(591965),B=a.i(736598);function C({agent:a,onChat:c,onHistory:d,onEdit:e,onDelete:h,onDuplicate:i}){var j,k;let m,n=(j=a.name,k=a.context,(m=`${j} ${k||""}`.toLowerCase()).includes("yoga")||m.includes("méditation")?"YOGA":m.includes("kiné")||m.includes("rééducation")||m.includes("blessure")?"KINESITHERAPY":m.includes("mental")||m.includes("psycho")?"MENTAL":m.includes("musculation")||m.includes("force")||m.includes("masse")?"STRENGTH":m.includes("pilates")||m.includes("core")||m.includes("postur")?"PILATES":m.includes("running")||m.includes("course")||m.includes("marathon")||m.includes("endurance")?"RUNNING":m.includes("programme")||m.includes("personnalisé")||m.includes("coach sportif")?"PROGRAM_DESIGN":m.includes("cardio")||m.includes("hiit")||m.includes("fitness")?"CARDIO":m.includes("combat")||m.includes("boxe")||m.includes("frappe")?"COMBAT":m.includes("nutrition")||m.includes("alimenta")||m.includes("repas")?"NUTRITION":null),o=n?B.specialtyColors[n]:"#6b7280",p=n?B.specialtyNames[n]:"Assistant IA";return(0,b.jsxs)(f.Card,{className:"group relative overflow-hidden transition-all hover:shadow-lg hover:scale-[1.02] hover:border-primary/50",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 transition-all group-hover:h-1.5",style:{backgroundColor:o}}),(0,b.jsxs)(f.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(t.Avatar,{className:"h-12 w-12 text-2xl",children:(0,b.jsx)(t.AvatarFallback,{className:"text-xl",style:{backgroundColor:`${o}20`,color:o},children:a.image||(0,b.jsx)(l.Bot,{className:"h-6 w-6"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-lg flex items-center gap-2",children:a.name}),(0,b.jsx)(s.Badge,{variant:"secondary",className:"mt-1 text-xs font-medium",style:{backgroundColor:`${o}15`,color:o,borderColor:`${o}30`},children:p})]})]}),(e||h||i)&&(0,b.jsxs)(u.DropdownMenu,{children:[(0,b.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(w.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(u.DropdownMenuContent,{align:"end",children:[e&&(0,b.jsxs)(u.DropdownMenuItem,{onClick:()=>e(a.id),children:[(0,b.jsx)(x.Edit,{className:"mr-2 h-4 w-4"}),"Modifier"]}),i&&(0,b.jsxs)(u.DropdownMenuItem,{onClick:()=>i(a.id),children:[(0,b.jsx)(z,{className:"mr-2 h-4 w-4"}),"Dupliquer"]}),h&&(0,b.jsxs)(u.DropdownMenuItem,{onClick:()=>h(a.id),className:"text-destructive focus:text-destructive",children:[(0,b.jsx)(y.Trash2,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]})]}),(0,b.jsx)(f.CardDescription,{className:"line-clamp-2 mt-2",children:a.context||"Assistant IA personnalisé"})]}),(0,b.jsxs)(f.CardContent,{className:"pt-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(v.MessageSquare,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a._count.sessions," session",1!==a._count.sessions?"s":""]})]}),d&&a._count.sessions>0&&(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>d(a.id),children:[(0,b.jsx)(A.History,{className:"mr-1 h-3 w-3"}),"Historique"]})]}),(0,b.jsxs)(g.Button,{className:"w-full",onClick:()=>c(a.id),style:{backgroundColor:o,color:"white"},children:[(0,b.jsx)(v.MessageSquare,{className:"mr-2 h-4 w-4"}),"Chatter avec ",a.name]})]})]})}function D(){let{user:a}=(0,e.useUser)(),h=(0,d.useRouter)(),[j,k]=(0,c.useState)([]),[m,t]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[D,F]=(0,c.useState)(new Set),{toast:G}=(0,r.useToast)();async function H(){try{let a=await fetch("/api/agents");if(!a.ok)throw Error("Failed to fetch");let b=await a.json();k(b)}catch(a){G({title:"Erreur",description:"Impossible de charger les assistants",variant:"destructive"})}finally{t(!1)}}async function I(){w(!0);try{let a=await fetch("/api/agents/init",{method:"POST"});if(!a.ok)throw Error("Failed to init");let b=await a.json();G({title:"Succès",description:b.message||"Agents créés avec succès"}),H()}catch(a){G({title:"Erreur",description:"Impossible de créer les agents",variant:"destructive"})}finally{w(!1)}}async function J(a){try{if(!(await fetch(`/api/agents/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete");G({title:"Succès",description:"Assistant supprimé"}),H()}catch(a){G({title:"Erreur",description:"Impossible de supprimer l'assistant",variant:"destructive"})}}(0,c.useEffect)(()=>{a?.role==="PRO"&&H()},[a]);let K=j.filter(a=>{let b,c=""===z||a.name.toLowerCase().includes(z.toLowerCase())||a.context?.toLowerCase().includes(z.toLowerCase()),d=(b=`${a.name} ${a.context||""}`.toLowerCase()).includes("yoga")||b.includes("méditation")?"YOGA":b.includes("kiné")||b.includes("rééducation")||b.includes("blessure")?"KINESITHERAPY":b.includes("mental")||b.includes("psycho")?"MENTAL":b.includes("musculation")||b.includes("force")||b.includes("masse")?"STRENGTH":b.includes("pilates")||b.includes("core")||b.includes("postur")?"PILATES":b.includes("running")||b.includes("course")||b.includes("marathon")||b.includes("endurance")?"RUNNING":b.includes("programme")||b.includes("personnalisé")||b.includes("coach sportif")?"PROGRAM_DESIGN":b.includes("cardio")||b.includes("hiit")||b.includes("fitness")?"CARDIO":b.includes("combat")||b.includes("boxe")||b.includes("frappe")?"COMBAT":b.includes("nutrition")||b.includes("alimenta")||b.includes("repas")?"NUTRITION":null,e=0===D.size||d&&D.has(d);return c&&e});return a?.role!=="PRO"?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Accès refusé"}),(0,b.jsx)(f.CardDescription,{children:"Cette page est réservée aux professionnels."})]})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(n.Sparkles,{className:"h-8 w-8 text-primary"}),"Mes Assistants IA"]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[j.length," assistant",1!==j.length?"s":""," personnalisé",1!==j.length?"s":""]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(g.Button,{onClick:I,variant:"outline",disabled:v,children:[v?(0,b.jsx)(q.RefreshCw,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(n.Sparkles,{className:"mr-2 h-4 w-4"}),0===j.length?"Créer 10 Experts":"Ajouter Nouveaux Experts"]}),(0,b.jsx)(E,{open:x,onOpenChange:y,onSuccess:H})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(i.Input,{placeholder:"Rechercher un assistant...",value:z,onChange:a=>A(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(u.DropdownMenu,{children:[(0,b.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(p.Filter,{className:"h-4 w-4"}),"Spécialités",D.size>0&&(0,b.jsx)(s.Badge,{variant:"secondary",className:"ml-1",children:D.size})]})}),(0,b.jsx)(u.DropdownMenuContent,{align:"end",className:"w-56",children:Object.keys(B.specialtyNames).map(a=>(0,b.jsxs)(u.DropdownMenuCheckboxItem,{checked:D.has(a),onCheckedChange:()=>{F(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:B.specialtyColors[a]}}),B.specialtyNames[a]]},a))})]}),D.size>0&&(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>F(new Set),children:"Effacer filtres"})]}),m?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[300px]",children:(0,b.jsx)(q.RefreshCw,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[K.map(a=>(0,b.jsx)(C,{agent:a,onChat:a=>h.push(`/dashboard/assistants/${a}/chat`),onHistory:a=>h.push(`/dashboard/assistants/${a}/history`),onDelete:J},a.id)),0===K.length&&j.length>0&&(0,b.jsx)("div",{className:"col-span-full",children:(0,b.jsx)(f.Card,{className:"border-dashed",children:(0,b.jsxs)(f.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(l.Bot,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center",children:"Aucun assistant ne correspond à votre recherche"}),(0,b.jsx)(g.Button,{variant:"link",onClick:()=>{A(""),F(new Set)},children:"Effacer les filtres"})]})})}),0===j.length&&(0,b.jsx)("div",{className:"col-span-full",children:(0,b.jsx)(f.Card,{className:"border-dashed",children:(0,b.jsxs)(f.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(n.Sparkles,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Aucun assistant"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:"Créez vos premiers assistants IA experts pour accompagner vos clients"}),(0,b.jsxs)(g.Button,{onClick:I,disabled:v,children:[(0,b.jsx)(n.Sparkles,{className:"mr-2 h-4 w-4"}),"Créer 10 Assistants Experts"]})]})})})]})]})}function E({open:a,onOpenChange:d,onSuccess:e}){let[f,l]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),{toast:u}=(0,r.useToast)();async function v(a){if(a.preventDefault(),f.trim()&&n.trim()){t(!0);try{if(!(await fetch("/api/agents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,prompt:n,context:p||null})})).ok)throw Error("Failed to create");u({title:"Succès",description:"Assistant créé avec succès"}),l(""),o(""),q(""),d(!1),e()}catch(a){u({title:"Erreur",description:"Impossible de créer l'assistant",variant:"destructive"})}finally{t(!1)}}}return(0,b.jsxs)(h.Dialog,{open:a,onOpenChange:d,children:[(0,b.jsx)(h.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Créer un assistant"]})}),(0,b.jsxs)(h.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(h.DialogHeader,{children:[(0,b.jsx)(h.DialogTitle,{children:"Créer un assistant"}),(0,b.jsx)(h.DialogDescription,{children:"Créez un assistant IA personnalisé pour vos clients"})]}),(0,b.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"name",children:"Nom"}),(0,b.jsx)(i.Input,{id:"name",value:f,onChange:a=>l(a.target.value),placeholder:"Nom de l'assistant",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"context",children:"Contexte (optionnel)"}),(0,b.jsx)(i.Input,{id:"context",value:p,onChange:a=>q(a.target.value),placeholder:"Contexte de l'assistant"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"prompt",children:"Prompt système"}),(0,b.jsx)(k.Textarea,{id:"prompt",value:n,onChange:a=>o(a.target.value),placeholder:"Décrivez le rôle et le comportement de l'assistant...",rows:6,required:!0})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Annuler"}),(0,b.jsx)(g.Button,{type:"submit",disabled:s,children:"Créer"})]})]})]})]})}a.s(["default",()=>D],684866)}];

//# sourceMappingURL=app_dashboard_assistants_page_tsx_2d98669e._.js.map