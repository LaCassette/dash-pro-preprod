module.exports=[596221,a=>{"use strict";var b=a.i(404650);a.s(["Loader2",()=>b.default])},546893,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},808406,a=>{"use strict";let b=(0,a.i(170106).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>b],808406)},50429,a=>{"use strict";let b=(0,a.i(170106).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);a.s(["Target",()=>b],50429)},724669,a=>{"use strict";let b=(0,a.i(170106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],724669)},613749,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],613749)},692759,a=>{"use strict";let b=(0,a.i(170106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],692759)},309889,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(278165),f=a.i(277687),g=a.i(703130),h=a.i(340695),i=a.i(254161),j=a.i(546893),k=a.i(46470),l=a.i(887682),m=a.i(514727),n=a.i(563588),o=a.i(692759),p=a.i(808406),q=a.i(546842),r=a.i(46864),s=a.i(641710),t=a.i(613749),u=a.i(50429);let v=(0,a.i(170106).default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var w=a.i(724669),x=a.i(596221);let y={GENERAL:(0,b.jsx)(n.MessageSquare,{className:"h-4 w-4"}),FEEDBACK:(0,b.jsx)(w.TrendingUp,{className:"h-4 w-4"}),QUESTION:(0,b.jsx)(v,{className:"h-4 w-4"}),GOAL:(0,b.jsx)(u.Target,{className:"h-4 w-4"}),PROGRESS:(0,b.jsx)(w.TrendingUp,{className:"h-4 w-4"})},z={GENERAL:"G√©n√©ral",FEEDBACK:"Feedback",QUESTION:"Question",GOAL:"Objectif",PROGRESS:"Progr√®s",NUTRITION:"Nutrition",TRAINING:"Entra√Ænement"};function A(){let a=(0,d.useParams)(),u=(0,d.useRouter)(),{user:v}=(0,e.useUser)(),{toast:w}=(0,f.useToast)(),A=a.id,[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)("GENERAL"),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(null),T=(0,c.useCallback)(async()=>{if(A)try{let a=await fetch("/api/organizations");if(a.ok){let b=await a.json();if(b.length>0){S(b[0].id);let a=await fetch(`/api/coaching/${b[0].id}/notes/${A}`);if(a.ok){let b=await a.json();C(b)}}}let b=await fetch(`/api/users/${A}`);if(b.ok){let a=await b.json();E(a)}}catch(a){w({title:"Erreur",description:"Impossible de charger les donn√©es",variant:"destructive"})}finally{G(!1)}},[A,w]);(0,c.useEffect)(()=>{T()},[T]);let U=async()=>{if(L.trim()&&R){I(!0);try{let a=await fetch(`/api/coaching/${R}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:parseInt(A),content:L,noteType:N})});if(!a.ok)throw Error("Failed to send note");let b=await a.json();C(a=>[b,...a]),M(""),w({title:"Note envoy√©e",description:"Votre note a √©t√© ajout√©e au suivi"})}catch(a){w({title:"Erreur",description:"Impossible d'envoyer la note",variant:"destructive"})}finally{I(!1)}}},V=async()=>{if(R){K(!0),Q(null);try{let a=await fetch(`/api/coaching/${R}/analyze-program`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:parseInt(A)})});if(!a.ok)throw Error("Failed to analyze");let b=await a.json();Q(b.analysis),w({title:"Analyse termin√©e",description:"La proposition de programme est pr√™te"})}catch(a){w({title:"Erreur",description:"Impossible d'analyser les √©changes",variant:"destructive"})}finally{K(!1)}}};return v?.role!=="PRO"?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Acc√®s refus√©"}),(0,b.jsx)(g.CardDescription,{children:"Cette page est r√©serv√©e aux professionnels."})]})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(m.SidebarTrigger,{}),(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>u.back(),children:(0,b.jsx)(t.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold",children:["Suivi de ",D?.name||D?.email||"Client"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Timeline des √©changes et notes de coaching"})]})]}),(0,b.jsxs)(h.Button,{onClick:V,disabled:J||0===B.length,className:"bg-gradient-to-r from-purple-500 to-pink-500",children:[J?(0,b.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(p.Sparkles,{className:"mr-2 h-4 w-4"}),"Analyser et Proposer Programme"]})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsx)(g.CardTitle,{className:"text-lg",children:"Ajouter une note"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)(l.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsx)(l.SelectContent,{children:Object.entries(z).map(([a,c])=>(0,b.jsx)(l.SelectItem,{value:a,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[y[a]||(0,b.jsx)(n.MessageSquare,{className:"h-4 w-4"}),c]})},a))})]})}),(0,b.jsx)(j.Textarea,{placeholder:"√âcrivez une note de suivi...",value:L,onChange:a=>M(a.target.value),rows:3}),(0,b.jsxs)(h.Button,{onClick:U,disabled:H||!L.trim(),className:"w-full",children:[H?(0,b.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(o.Send,{className:"mr-2 h-4 w-4"}),"Envoyer la note"]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Timeline du suivi"}),(0,b.jsxs)(g.CardDescription,{children:[B.length," note",1!==B.length?"s":""]})]}),(0,b.jsx)(g.CardContent,{children:F?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===B.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(n.MessageSquare,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"Aucune note de suivi pour l'instant"}),(0,b.jsx)("p",{className:"text-sm",children:"Commencez par envoyer une note ci-dessus"})]}):(0,b.jsx)(k.ScrollArea,{className:"h-[500px] pr-4",children:(0,b.jsx)("div",{className:"space-y-4",children:B.map(a=>(0,b.jsxs)("div",{className:`flex gap-3 ${a.isFromCoach?"":"flex-row-reverse"}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${a.isFromCoach?"bg-primary text-primary-foreground":"bg-muted"}`,children:a.isFromCoach?(0,b.jsx)(r.UserCheck,{className:"h-4 w-4"}):(0,b.jsx)(q.User,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:`flex-1 max-w-[80%] ${a.isFromCoach?"":"text-right"}`,children:[(0,b.jsxs)("div",{className:`inline-block p-3 rounded-lg ${a.isFromCoach?"bg-primary/10 text-left":"bg-muted text-left"}`,children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,b.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:z[a.noteType]||a.noteType})}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(s.Clock,{className:"h-3 w-3"}),new Date(a.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]})]})]},a.id))})})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Sparkles,{className:"h-5 w-5 text-purple-500"}),"Analyse IA"]}),(0,b.jsx)(g.CardDescription,{children:"Propositions bas√©es sur les √©changes r√©cents"})]}),(0,b.jsx)(g.CardContent,{children:J?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,b.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-purple-500 mb-4"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analyse en cours..."})]}):P?(0,b.jsx)(k.ScrollArea,{className:"h-[400px]",children:(0,b.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:P.replace(/\n/g,"<br>")}})})}):(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(p.Sparkles,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:'Cliquez sur "Analyser et Proposer Programme"'}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"L'IA analysera les √©changes et proposera des modifications au programme"})]})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Actions rapides"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-2",children:[(0,b.jsx)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>u.push(`/dashboard/clients/${A}/measurements`),children:"üìä Voir les mensurations"}),(0,b.jsx)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>u.push(`/dashboard/clients/${A}/sessions`),children:"üèãÔ∏è G√©rer les sessions"}),(0,b.jsx)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>u.push("/dashboard/programs"),children:"üìã Voir les programmes"})]})]})]})]})]})}a.s(["default",()=>A],309889)}];

//# sourceMappingURL=_91f42ca0._.js.map