module.exports=[915618,a=>{"use strict";let b=(0,a.i(170106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],915618)},917171,a=>{"use strict";var b=a.i(187924),c=a.i(572131);a.i(935112);var d=a.i(811011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(497895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],917171)},965733,a=>{"use strict";var b=a.i(187924),c=a.i(897942),d=a.i(422262),e=a.i(497895);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function m({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function n({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g])},824569,a=>{"use strict";let b=(0,a.i(170106).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],824569)},177156,a=>{"use strict";let b=(0,a.i(170106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],177156)},900969,a=>{"use strict";a.s(["localeFlags",0,{fr:"ðŸ‡«ðŸ‡·",en:"ðŸ‡¬ðŸ‡§",it:"ðŸ‡®ðŸ‡¹",es:"ðŸ‡ªðŸ‡¸",ja:"ðŸ‡¯ðŸ‡µ",fi:"ðŸ‡«ðŸ‡®",zh:"ðŸ‡¨ðŸ‡³",hi:"ðŸ‡®ðŸ‡³",ar:"ðŸ‡¸ðŸ‡¦",bn:"ðŸ‡§ðŸ‡©",pt:"ðŸ‡§ðŸ‡·",ru:"ðŸ‡·ðŸ‡º",de:"ðŸ‡©ðŸ‡ª",ko:"ðŸ‡°ðŸ‡·",vi:"ðŸ‡»ðŸ‡³",tr:"ðŸ‡¹ðŸ‡·",pl:"ðŸ‡µðŸ‡±",th:"ðŸ‡¹ðŸ‡­",uk:"ðŸ‡ºðŸ‡¦",nl:"ðŸ‡³ðŸ‡±",id:"ðŸ‡®ðŸ‡©",sv:"ðŸ‡¸ðŸ‡ª",el:"ðŸ‡¬ðŸ‡·",cs:"ðŸ‡¨ðŸ‡¿",ro:"ðŸ‡·ðŸ‡´",hu:"ðŸ‡­ðŸ‡º"},"localeNames",0,{fr:"FranÃ§ais",en:"English",it:"Italiano",es:"EspaÃ±ol",ja:"æ—¥æœ¬èªž",fi:"Suomi",zh:"ä¸­æ–‡",hi:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",bn:"à¦¬à¦¾à¦‚à¦²à¦¾",pt:"PortuguÃªs",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹",de:"Deutsch",ko:"í•œêµ­ì–´",vi:"Tiáº¿ng Viá»‡t",tr:"TÃ¼rkÃ§e",pl:"Polski",th:"à¹„à¸—à¸¢",uk:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°",nl:"Nederlands",id:"Bahasa Indonesia",sv:"Svenska",el:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬",cs:"ÄŒeÅ¡tina",ro:"RomÃ¢nÄƒ",hu:"Magyar"},"locales",0,["fr","en","it","es","ja","fi","zh","hi","ar","bn","pt","ru","de","ko","vi","tr","pl","th","uk","nl","id","sv","el","cs","ro","hu"]])},808406,a=>{"use strict";let b=(0,a.i(170106).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>b],808406)},35636,a=>{"use strict";var b=a.i(572131);function c(){let[a,c]=(0,b.useState)(!1),[d,e]=(0,b.useState)(null);return{generate:(0,b.useCallback)(async(a,b={},d)=>{c(!0),e(null);try{let{model:c="openai/gpt-oss-120b",stream:e=!0,stream_options:f={include_usage:!0,continuous_usage_stats:!0},top_p:g=1,max_tokens:h=1e4,temperature:i=1,presence_penalty:j=0,frequency_penalty:k=0}=b,l=await fetch("/api/baseten/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:a,model:c,stream:e,stream_options:f,top_p:g,max_tokens:h,temperature:i,presence_penalty:j,frequency_penalty:k})});if(!l.ok){let a=await l.json();throw Error(a.error||"Failed to generate content")}if(e){let a=l.body?.getReader(),b=new TextDecoder,c="";if(!a)throw Error("No response body");for(;;){let{done:e,value:f}=await a.read();if(e)break;for(let a of b.decode(f).split("\n"))if(a.startsWith("data: "))try{let b=JSON.parse(a.slice(6));b.content&&(c+=b.content,d?.(b.content))}catch(a){}}return c}{let a=await l.json();return a.choices[0]?.message?.content||""}}catch(a){throw e(a instanceof Error?a.message:"Unknown error"),a}finally{c(!1)}},[]),loading:a,error:d,reset:(0,b.useCallback)(()=>{e(null),c(!1)},[])}}a.s(["useBaseten",()=>c])},869359,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(278165),e=a.i(856696),f=a.i(892474),g=a.i(413902),h=a.i(703130),i=a.i(340695),j=a.i(254161),k=a.i(564485),l=a.i(915618),m=a.i(563588),n=a.i(177156),o=a.i(824569),p=a.i(267900),q=a.i(50944),r=a.i(277687),s=a.i(829108),t=a.i(514727),u=a.i(887682),v=a.i(596221);function w(){let{user:a}=(0,d.useUser)(),{activeOrganization:w,setOrganization:x,organizations:y,getAccentColor:z}=(0,e.useOrganization)(),{subscription:A}=(0,f.useSubscription)(),{theme:B}=(0,g.useTheme)(),C=(0,q.useRouter)(),{toast:D}=(0,r.useToast)(),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)("all"),[O,P]=(0,c.useState)(!1);(0,c.useEffect)(()=>{P(!0)},[]);let Q=O?z("dark"===B):void 0,R=A&&("TRIAL"===A.status||"ACTIVE"===A.status);async function S(){if(a){H(!0);try{let a="/api/programs?type=NUTRITION";M&&"all"!==M&&(a+=`&organizationId=${M}`);let b=await fetch(a);if(!b.ok)throw Error("Failed to fetch");let c=(await b.json()).filter(a=>"NUTRITION"===a.type);F(c)}catch(a){console.error("Error fetching programs:",a),D({title:"Erreur",description:"Impossible de charger les programmes",variant:"destructive"})}finally{H(!1)}}}async function T(a){J(a);try{let b=await fetch("/api/chats/direct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to create chat")}let c=await b.json();C.push(`/dashboard/messaging?chatId=${c.id}`)}catch(a){D({title:"Erreur",description:a instanceof Error?a.message:"Impossible de crÃ©er la conversation",variant:"destructive"})}finally{J(null)}}return(0,c.useEffect)(()=>{w?N(w.id):N("all")},[w]),(0,c.useEffect)(()=>{a&&S()},[a,M]),(0,b.jsxs)("div",{className:"container mx-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.SidebarTrigger,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",style:Q?{color:Q}:void 0,children:"Ma Nutrition"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"GÃ©rez vos programmes nutritionnels"})]})]}),a?.role==="PRO"&&(R?(0,b.jsxs)(i.Button,{onClick:()=>L(!0),children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"}),"Nouveau programme"]}):(0,b.jsxs)(i.Button,{disabled:!0,variant:"outline",onClick:()=>{C.push("/dashboard/subscription")},title:"Un abonnement actif est requis pour crÃ©er des programmes",children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"}),"Nouveau programme"]}))]}),y.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(u.Select,{value:M,onValueChange:function(a){if(N(a),"all"===a)x(null);else{let b=y.find(b=>b.id===a);b&&x(b)}},children:[(0,b.jsx)(u.SelectTrigger,{className:"w-[250px]",children:(0,b.jsx)(u.SelectValue,{placeholder:"Filtrer par organisation"})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"all",children:"Tous mes programmes"}),y.map(a=>(0,b.jsx)(u.SelectItem,{value:a.id,children:a.name},a.id))]})]}),"all"!==M&&(0,b.jsx)(j.Badge,{variant:"outline",className:"ml-2",children:y.find(a=>a.id===M)?.name})]})]}),G?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[E.map(c=>{let d;return d=c.organization?.accentColor?c.organization.accentColor:c.organization?"dark"===B?"#f8fafc":"#020617":Q||("dark"===B?"#f8fafc":"#020617"),(0,b.jsxs)(h.Card,{style:{borderColor:d,borderWidth:"2px"},children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Apple,{className:"h-5 w-5"}),(0,b.jsx)(h.CardTitle,{children:c.name})]}),(0,b.jsxs)(h.CardDescription,{children:[c.description||"Programme nutritionnel",c.organization&&(0,b.jsxs)("span",{className:"ml-2 text-xs",children:["â€¢ ",c.organization.name]})]})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Badge,{variant:"outline",children:"Nutritionnel"}),c.organization&&(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs",style:c.organization.accentColor?{backgroundColor:`${c.organization.accentColor}15`,color:c.organization.accentColor}:void 0,children:c.organization.name})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Button,{variant:"default",size:"sm",className:"flex-1",onClick:()=>C.push(`/dashboard/programs/${c.id}`),children:[(0,b.jsx)(n.Eye,{className:"mr-2 h-4 w-4"}),"Voir"]}),a?.role==="PRO"&&a.id===c.createdBy.id&&(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>C.push(`/dashboard/programs/${c.id}/edit`),children:(0,b.jsx)(o.Edit,{className:"h-4 w-4"})}),a?.role==="USER"&&c.createdBy&&(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>T(c.createdBy.id),disabled:I===c.createdBy.id,children:(0,b.jsx)(m.MessageSquare,{className:"h-4 w-4"})})]}),a?.role==="USER"&&c.createdBy&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Nutritionniste: ",c.createdBy.name||c.createdBy.email]})]})})]},c.id)}),0===E.length&&!G&&(0,b.jsx)("div",{className:"col-span-full",children:(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Aucun programme"}),(0,b.jsx)(h.CardDescription,{children:"all"===M?"Aucun programme nutritionnel disponible pour le moment":`Aucun programme nutritionnel pour l'organisation "${y.find(a=>a.id===M)?.name||"sÃ©lectionnÃ©e"}"`})]})})})]}),(0,b.jsx)(s.ProgramGeneratorForm,{open:K,onOpenChange:L,type:"NUTRITION",onSuccess:()=>{S()}})]})}a.s(["default",()=>w])}];

//# sourceMappingURL=_589c1286._.js.map