module.exports=[502365,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(238246),e=a.i(50944),f=a.i(278165),g=a.i(415925),h=a.i(170106);let i=(0,h.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var j=a.i(835181),k=a.i(564485),l=a.i(563588),m=a.i(660246),n=a.i(267900),o=a.i(28379),p=a.i(182434);let q=(0,h.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var r=a.i(65341),s=a.i(470880),t=a.i(546842),u=a.i(473237),v=a.i(46864);let w=(0,h.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var x=a.i(104720),y=a.i(514727),z=a.i(340695),A=a.i(807706),B=a.i(254161),C=a.i(413902),D=a.i(856696),E=a.i(887682);function F({user:a}){let h=(0,e.usePathname)(),{theme:F,setTheme:G}=(0,C.useTheme)(),[H,I]=(0,c.useState)(!1),{activeOrganization:J,setOrganization:K,organizations:L,getAccentColor:M}=(0,D.useOrganization)(),{user:N}=(0,f.useUser)(),[O,P]=(0,c.useState)(0),Q=(0,g.useTranslations)("nav"),R=(0,g.useTranslations)("roles"),S=(0,g.useTranslations)("common");async function T(){try{let a=await fetch("/api/chats");if(!a.ok)return;let b=(await a.json()).reduce((a,b)=>a+(b.unreadCount||0),0);P(b)}catch(a){console.error("Error fetching unread count:",a)}}(0,c.useEffect)(()=>{I(!0)},[]),(0,c.useEffect)(()=>{if(N){T();let a=setInterval(T,1e4);return()=>clearInterval(a)}},[N]);let U=H?M("dark"===F):null,V=[{label:S("settings"),labelKey:"general",items:[{title:Q("dashboard"),icon:i,href:"/dashboard",roles:["USER","PRO","ADMIN"]},{title:Q("profile"),icon:t.User,href:"/dashboard/profile",roles:["USER","PRO","ADMIN"]},{title:Q("trainings"),icon:j.Dumbbell,href:"/dashboard/trainings",roles:["USER","PRO","ADMIN"]},{title:Q("nutrition"),icon:k.Apple,href:"/dashboard/nutrition",roles:["USER","PRO","ADMIN"]},{title:Q("messaging"),icon:l.MessageSquare,href:"/dashboard/messaging",roles:["USER","PRO","ADMIN"],badge:O>0?O:void 0}]},{label:R("pro"),labelKey:"professional",items:[{title:Q("clients"),icon:m.Users,href:"/dashboard/clients",roles:["PRO"]},{title:Q("organizations"),icon:n.Building2,href:"/dashboard/organizations",roles:["PRO"]},{title:Q("assistants"),icon:p.Bot,href:"/dashboard/assistants",roles:["PRO"]},{title:Q("calculators"),icon:u.Calculator,href:"/dashboard/calculators",roles:["PRO"]},{title:Q("programs"),icon:x.FileText,href:"/dashboard/programs",roles:["PRO"]},{title:Q("programBuilder"),icon:j.Dumbbell,href:"/dashboard/programs/builder",roles:["PRO"]},{title:Q("subscription"),icon:w,href:"/dashboard/subscription",roles:["PRO"]}]},{label:R("user"),labelKey:"user",items:[{title:Q("organizations"),icon:n.Building2,href:"/dashboard/organizations/user",roles:["USER"]}]},{label:Q("admin"),labelKey:"admin",items:[{title:Q("pros"),icon:v.UserCheck,href:"/dashboard/admin/pros",roles:["ADMIN"]},{title:Q("users"),icon:o.UserCog,href:"/dashboard/admin/users",roles:["ADMIN"]},{title:Q("organizations"),icon:n.Building2,href:"/dashboard/admin/organizations",roles:["ADMIN"]}]}].map(b=>({...b,items:b.items.filter(b=>b.roles.includes(a.role))})).filter(a=>a.items.length>0);return(0,b.jsxs)(y.Sidebar,{collapsible:"icon","data-tour":"sidebar",children:[(0,b.jsx)(y.SidebarHeader,{children:(0,b.jsxs)("div",{className:"px-4 py-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(A.Avatar,{children:[(0,b.jsx)(A.AvatarImage,{src:a.picture||void 0}),(0,b.jsx)(A.AvatarFallback,{children:a.name?.charAt(0).toUpperCase()||a.email.charAt(0).toUpperCase()})]}),(0,b.jsxs)("div",{className:"flex flex-col group-data-[collapsible=icon]:hidden",children:[(0,b.jsx)("div",{className:"font-medium",children:a.name||a.email}),(0,b.jsx)(B.Badge,{variant:"outline",className:"w-fit text-xs",children:a.role})]})]}),L.length>0&&(0,b.jsx)("div",{className:"group-data-[collapsible=icon]:hidden","data-tour":"organization-selector",children:(0,b.jsxs)(E.Select,{value:J?.id||"",onValueChange:a=>{let b=L.find(b=>b.id===a);b&&K(b)},children:[(0,b.jsx)(E.SelectTrigger,{className:"w-full",children:(0,b.jsx)(E.SelectValue,{placeholder:"SÃ©lectionner une organisation"})}),(0,b.jsx)(E.SelectContent,{children:L.map(a=>(0,b.jsx)(E.SelectItem,{value:a.id,children:a.name},a.id))})]})})]})}),(0,b.jsx)(y.SidebarContent,{children:V.map(a=>(0,b.jsxs)(y.SidebarGroup,{children:[(0,b.jsx)(y.SidebarGroupLabel,{className:"group-data-[collapsible=icon]:hidden",children:a.label}),(0,b.jsx)(y.SidebarGroupContent,{children:(0,b.jsx)(y.SidebarMenu,{children:a.items.map(a=>{let c=a.icon,e=h===a.href;return(0,b.jsx)(y.SidebarMenuItem,{children:(0,b.jsx)(y.SidebarMenuButton,{asChild:!0,isActive:e,tooltip:a.title,style:H&&e&&U?{backgroundColor:`${U}15`,color:U}:void 0,children:(0,b.jsxs)(d.default,{href:a.href,"data-tour":"/dashboard/profile"===a.href?"profile-link":"/dashboard/trainings"===a.href?"trainings-link":"/dashboard/nutrition"===a.href?"nutrition-link":"/dashboard/messaging"===a.href?"messaging-link":"/dashboard/clients"===a.href?"clients-link":"/dashboard/organizations"===a.href?"organizations-link":"/dashboard/assistants"===a.href?"assistants-link":"/dashboard/calculators"===a.href?"calculators-link":"/dashboard/subscription"===a.href?"subscription-link":"/dashboard/organizations/user"===a.href?"user-organizations-link":void 0,children:[(0,b.jsx)(c,{style:H&&e&&U?{color:U}:void 0}),(0,b.jsx)("span",{children:a.title}),void 0!==a.badge&&a.badge>0&&(0,b.jsx)(B.Badge,{variant:"destructive",className:"ml-auto h-5 min-w-5 px-1.5 flex items-center justify-center text-xs",children:a.badge>99?"99+":a.badge})]})})},a.href)})})})]},a.label))}),(0,b.jsx)(y.SidebarFooter,{children:(0,b.jsxs)("div",{className:"p-4 space-y-2",children:[(0,b.jsx)(z.Button,{variant:"ghost",className:"w-full justify-start group-data-[collapsible=icon]:w-auto group-data-[collapsible=icon]:px-2",onClick:()=>G("dark"===F?"light":"dark"),children:H&&"dark"===F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Sun,{className:"h-4 w-4 group-data-[collapsible=icon]:mr-0 mr-2"}),(0,b.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:"â˜€ï¸"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Moon,{className:"h-4 w-4 group-data-[collapsible=icon]:mr-0 mr-2"}),(0,b.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:"ðŸŒ™"})]})}),(0,b.jsx)(y.SidebarMenuButton,{asChild:!0,className:"w-full group-data-[collapsible=icon]:w-auto group-data-[collapsible=icon]:px-2",tooltip:S("logout"),children:(0,b.jsxs)(d.default,{href:"/auth/logout",children:[(0,b.jsx)(q,{}),(0,b.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:S("logout")})]})})]})}),(0,b.jsx)(y.SidebarRail,{})]})}a.s(["SidebarComponent",()=>F],502365)},132245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(441997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},307773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},297458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(187924),e=a.r(935112),f=a.r(556704),g=a.r(307773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},969853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(187924),e=a.r(572131),f=a.r(132245),g=a.r(297458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},819721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(833354)._(a.r(969853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},663433,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(278165),e=a.i(277687),f=a.i(50944);function g(){let{user:a}=(0,d.useUser)(),{toast:b}=(0,e.useToast)(),g=(0,f.useRouter)(),h=(0,c.useRef)(new Set),i=(0,c.useRef)(new Set),j=(0,c.useRef)(new Date(Date.now()-6e4));async function k(){if(a)try{let c=await fetch("/api/chats");if(!c.ok)return;for(let d of(await c.json())){if(!d.messages||0===d.messages.length)continue;let c=d.messages[0];if(c.senderId!==a.id&&new Date(c.createdAt)>j.current&&!h.current.has(c.id)){h.current.add(c.id);let a=c.sender?.name||c.sender?.email||"Quelqu'un",e=d.name||a;b({title:"Nouveau message",description:`${a} vous a envoy\xe9 un message${d.name?` dans ${e}`:""}`,onClick:()=>g.push(`/dashboard/messaging?chatId=${d.id}`)})}}j.current=new Date}catch(a){console.error("Error checking new messages:",a)}}async function l(){if(a&&"PRO"===a.role)try{let c=await fetch("/api/organizations");if(!c.ok)return;for(let d of(await c.json())){if(d.owner.id!==a.id)continue;let c=await fetch(`/api/organizations/${d.id}/requests`);if(c.ok){for(let a of(await c.json()).filter(a=>"PENDING"===a.status))if(new Date(a.createdAt)>j.current&&!i.current.has(a.id)){i.current.add(a.id);let c=a.user?.name||a.user?.email||"Un utilisateur";b({title:"Nouvelle demande d'organisation",description:`${c} souhaite rejoindre ${d.name}`,onClick:()=>g.push(`/dashboard/organizations/${d.id}`)})}}}}catch(a){console.error("Error checking new requests:",a)}}return(0,c.useEffect)(()=>{if(!a)return;let b=setInterval(()=>{k(),"PRO"===a.role&&l()},3e4),c=setTimeout(()=>{k(),"PRO"===a.role&&l()},5e3);return()=>{clearInterval(b),clearTimeout(c)}},[a]),null}var h=a.i(892474),i=a.i(340695),j=a.i(238246);let k=(0,a.i(170106).default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),l=["TRIAL","ACTIVE"];function m(){let{user:a,loading:e}=(0,d.useUser)(),{subscription:g,loading:m}=(0,h.useSubscription)(),n=(0,f.usePathname)(),o=(0,c.useMemo)(()=>!(!a||n.startsWith("/dashboard/subscription"))&&"PRO"===a.role&&"PENDING"===a.proStatus&&!(g&&l.includes(g.status)),[a,g,n]);return e||m||!o?null:(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"max-w-lg w-full rounded-3xl border bg-background shadow-2xl p-8 space-y-6 text-center",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,b.jsx)(k,{className:"h-12 w-12 text-primary"}),(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Activez votre compte professionnel"})]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Vous avez demandÃ© Ã  devenir PRO. Pour dÃ©bloquer toutes les fonctionnalitÃ©s, activez votre abonnement (14 jours d'essai offerts). Une fois l'abonnement actif, votre dashboard sera automatiquement dÃ©bloquÃ©."}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i.Button,{asChild:!0,size:"lg",className:"w-full",children:(0,b.jsx)(j.default,{href:"/dashboard/subscription",children:"Activer mon abonnement"})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cette Ã©tape est obligatoire pour respecter nos conditions d'utilisation et garantir la sÃ©curitÃ© des donnÃ©es clients."})]})]})})}var n=a.i(819721),o=a.i(415925),p=a.i(641710),q=a.i(816201);let r=(0,n.default)(async()=>{},{loadableGenerated:{modules:[728014]},ssr:!1}),s="atletia_onboarding_completed",t="atletia_onboarding_remind_later";function u({title:a,description:c,extra:d}){return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c}),d&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsxs)("strong",{children:[d.split(":")[0],":"]}),d.split(":").slice(1).join(":")]})]})}function v(){let{user:a,loading:e}=(0,d.useUser)(),g=(0,f.usePathname)(),h=(0,o.useTranslations)("tour"),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(0),[n,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{v(!0)},[]),(0,c.useEffect)(()=>{if(!n||e||!a)return;let b=localStorage.getItem(s),c=localStorage.getItem(t);if("/dashboard"===g&&!b&&!c||"/dashboard"===g&&c&&!b){let a=setTimeout(()=>{k(!0)},1e3);return()=>clearTimeout(a)}},[n,e,a,g]);let y=(0,c.useMemo)(()=>{if(!a)return[];let c=[{target:'[data-tour="dashboard-header"]',content:(0,b.jsx)(u,{title:h("welcome.title"),description:h("welcome.description"),extra:h("welcome.start")}),placement:"bottom",disableBeacon:!0},{target:'[data-tour="sidebar"]',content:(0,b.jsx)(u,{title:h("sidebar.title"),description:h("sidebar.description"),extra:h("sidebar.tip")}),placement:"right"},{target:'[data-tour="dashboard-stats"]',content:(0,b.jsx)(u,{title:h("stats.title"),description:h("stats.description"),extra:h("stats.realtime")}),placement:"bottom"},{target:'[data-tour="profile-link"]',content:(0,b.jsx)(u,{title:h("profile.title"),description:h("profile.description"),extra:h("profile.important")}),placement:"right"},{target:'[data-tour="trainings-link"]',content:(0,b.jsx)(u,{title:h("trainings.title"),description:h("trainings.description"),extra:h("trainings.filter")}),placement:"right"},{target:'[data-tour="nutrition-link"]',content:(0,b.jsx)(u,{title:h("nutrition.title"),description:h("nutrition.description"),extra:h("nutrition.adapted")}),placement:"right"},{target:'[data-tour="messaging-link"]',content:(0,b.jsx)(u,{title:h("messaging.title"),description:h("messaging.description"),extra:h("messaging.security")}),placement:"right"}];return"PRO"===a.role&&c.push({target:'[data-tour="clients-link"]',content:(0,b.jsx)(u,{title:h("clients.title"),description:h("clients.description"),extra:h("clients.features")}),placement:"right"},{target:'[data-tour="organizations-link"]',content:(0,b.jsx)(u,{title:h("organizations.title"),description:h("organizations.descriptionPro"),extra:h("organizations.customization")}),placement:"right"},{target:'[data-tour="assistants-link"]',content:(0,b.jsx)(u,{title:h("assistants.title"),description:h("assistants.description"),extra:h("assistants.tip")}),placement:"right"},{target:'[data-tour="calculators-link"]',content:(0,b.jsx)(u,{title:h("calculators.title"),description:h("calculators.description"),extra:h("calculators.purpose")}),placement:"right"},{target:'[data-tour="subscription-link"]',content:(0,b.jsx)(u,{title:h("subscription.title"),description:h("subscription.description"),extra:h("subscription.trial")}),placement:"right"}),"USER"===a.role&&c.push({target:'[data-tour="user-organizations-link"]',content:(0,b.jsx)(u,{title:h("organizations.title"),description:h("organizations.descriptionUser"),extra:h("organizations.search")}),placement:"right"}),a.organizationMemberships&&a.organizationMemberships.length>0&&c.push({target:'[data-tour="organization-selector"]',content:(0,b.jsx)(u,{title:h("orgSelector.title"),description:h("orgSelector.description"),extra:h("orgSelector.context")}),placement:"right"}),c},[a,h]),z=(0,c.useCallback)(a=>{let{status:b,type:c,index:d}=a;("step:after"===c||"tour:start"===c||"step:before"===c)&&m(d),"step:after"===c&&(d===y.length-1?x(!0):x(!1)),("finished"===b||"skipped"===b)&&(k(!1),x(!1))},[y.length]);return n&&a?(0,b.jsxs)(b.Fragment,{children:[n&&y.length>0&&(0,b.jsx)(r,{steps:y,run:j,continuous:!0,showProgress:!0,showSkipButton:!0,callback:z,disableOverlayClose:!1,disableScrolling:!1,spotlightClicks:!1,styles:{options:{primaryColor:"#3b82f6",zIndex:1e4},tooltip:{borderRadius:8},buttonNext:{backgroundColor:"#3b82f6",borderRadius:6},buttonBack:{color:"#3b82f6"}},locale:{back:h("buttons.back"),close:h("buttons.close"),last:h("buttons.last"),next:h("buttons.next"),skip:h("buttons.skip")},floaterProps:{disableAnimation:!1}}),w&&j&&l===y.length-1&&(0,b.jsxs)("div",{className:"fixed bottom-4 right-4 z-[10001] flex gap-2 animate-in slide-in-from-bottom duration-300",children:[(0,b.jsxs)(i.Button,{variant:"outline",onClick:()=>{localStorage.setItem(t,"true"),k(!1),x(!1)},className:"bg-background shadow-lg",children:[(0,b.jsx)(p.Clock,{className:"mr-2 h-4 w-4"}),h("buttons.remindLater")]}),(0,b.jsxs)(i.Button,{onClick:()=>{localStorage.setItem(s,"true"),localStorage.removeItem(t),k(!1),x(!1)},className:"shadow-lg",children:[(0,b.jsx)(q.CheckCircle,{className:"mr-2 h-4 w-4"}),h("buttons.understood")]})]})]}):null}function w(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{}),(0,b.jsx)(m,{}),(0,b.jsx)(v,{})]})}a.s(["DashboardClient",()=>w],663433)}];

//# sourceMappingURL=_151a9990._.js.map