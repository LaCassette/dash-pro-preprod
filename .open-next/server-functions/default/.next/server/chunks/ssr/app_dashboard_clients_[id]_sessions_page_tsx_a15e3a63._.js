module.exports=[404604,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(278165),f=a.i(277687),g=a.i(703130),h=a.i(340695),i=a.i(205522),j=a.i(917171),k=a.i(254161),l=a.i(965733),m=a.i(887682),n=a.i(46470),o=a.i(514727),p=a.i(613749),q=a.i(915618),r=a.i(835181),s=a.i(641710),t=a.i(941675),u=a.i(325015),v=a.i(167453),w=a.i(781560),x=a.i(596221),y=a.i(50429);let z=(0,a.i(170106).default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var A=a.i(821374);let B={CHEST:"Pectoraux",BACK:"Dos",SHOULDERS:"Épaules",BICEPS:"Biceps",TRICEPS:"Triceps",FOREARMS:"Avant-bras",ABS:"Abdos",OBLIQUES:"Obliques",QUADRICEPS:"Quadriceps",HAMSTRINGS:"Ischio-jambiers",GLUTES:"Fessiers",CALVES:"Mollets",LOWER_BACK:"Lombaires",TRAPS:"Trapèzes",FULL_BODY:"Full Body",CARDIO:"Cardio",STRETCHING:"Étirements"},C={PLANNED:"bg-blue-100 text-blue-800",IN_PROGRESS:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-gray-100 text-gray-800",SKIPPED:"bg-red-100 text-red-800"};function D(){let a=(0,d.useParams)(),D=(0,d.useRouter)(),{user:E}=(0,e.useUser)(),{toast:F}=(0,f.useToast)(),G=a.id,[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)({}),[N,O]=(0,c.useState)(!0),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)([]),[X,Y]=(0,c.useState)({name:"",description:"",sessionType:"STRENGTH",scheduledAt:""}),Z=(0,c.useCallback)(async()=>{try{let[a,b,c]=await Promise.all([fetch(`/api/workout-sessions/users/${G}`),fetch(`/api/workout-sessions/users/${G}/stats`),fetch("/api/exercises/grouped")]);if(a.ok){let b=await a.json();I(b.sessions||[])}b.ok&&K(await b.json()),c.ok&&M(await c.json())}catch(a){F({title:"Erreur",description:"Impossible de charger les données",variant:"destructive"})}finally{O(!1)}},[G,F]);(0,c.useEffect)(()=>{Z()},[Z]);let $=async a=>{if(a.preventDefault(),0===V.length)return void F({title:"Erreur",description:"Ajoutez au moins un exercice",variant:"destructive"});Q(!0);try{if(!(await fetch(`/api/workout-sessions/users/${G}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...X,exercises:V.map(a=>({exerciseId:a.exerciseId,sets:a.sets,reps:a.reps,weight:a.weight||null,restTime:a.restTime}))})})).ok)throw Error("Failed to create");F({title:"Session créée",description:"La session a été planifiée"}),S(!1),Y({name:"",description:"",sessionType:"STRENGTH",scheduledAt:""}),W([]),Z()}catch(a){F({title:"Erreur",description:"Impossible de créer la session",variant:"destructive"})}finally{Q(!1)}};return E?.role!=="PRO"?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)(g.Card,{children:(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Accès refusé"})})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(o.SidebarTrigger,{}),(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>D.back(),children:(0,b.jsx)(p.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Sessions d'entraînement"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Création et suivi des workouts"})]})]}),(0,b.jsxs)(l.Dialog,{open:R,onOpenChange:S,children:[(0,b.jsx)(l.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-4 w-4"}),"Nouvelle session"]})}),(0,b.jsxs)(l.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:"Créer une session d'entraînement"}),(0,b.jsx)(l.DialogDescription,{children:"Sélectionnez les exercices et configurez la session"})]}),(0,b.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"name",children:"Nom de la session"}),(0,b.jsx)(i.Input,{id:"name",value:X.name,onChange:a=>Y({...X,name:a.target.value}),placeholder:"Push Day",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"sessionType",children:"Type"}),(0,b.jsxs)(m.Select,{value:X.sessionType,onValueChange:a=>Y({...X,sessionType:a}),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"STRENGTH",children:"Force"}),(0,b.jsx)(m.SelectItem,{value:"HYPERTROPHY",children:"Hypertrophie"}),(0,b.jsx)(m.SelectItem,{value:"CARDIO",children:"Cardio"}),(0,b.jsx)(m.SelectItem,{value:"HIIT",children:"HIIT"}),(0,b.jsx)(m.SelectItem,{value:"MOBILITY",children:"Mobilité"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)(j.Label,{htmlFor:"scheduledAt",children:"Date planifiée"}),(0,b.jsx)(i.Input,{id:"scheduledAt",type:"datetime-local",value:X.scheduledAt,onChange:a=>Y({...X,scheduledAt:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsx)(j.Label,{children:"Ajouter des exercices"}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)(m.Select,{value:T,onValueChange:U,children:[(0,b.jsx)(m.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(m.SelectValue,{placeholder:"Groupe musculaire"})}),(0,b.jsx)(m.SelectContent,{children:Object.keys(L).map(a=>(0,b.jsx)(m.SelectItem,{value:a,children:B[a]||a},a))})]})}),T&&L[T]&&(0,b.jsx)(n.ScrollArea,{className:"h-[200px] border rounded p-2",children:(0,b.jsx)("div",{className:"space-y-1",children:L[T].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{W(b=>[...b,{exerciseId:a.id,exercise:a,sets:3,reps:"10",weight:0,restTime:60}])},className:"w-full text-left p-2 hover:bg-muted rounded flex justify-between items-center",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsx)(k.Badge,{variant:"outline",children:a.equipmentType})]},a.id))})})]}),V.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{children:["Exercices sélectionnés (",V.length,")"]}),(0,b.jsx)("div",{className:"space-y-2",children:V.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded",children:[(0,b.jsx)("span",{className:"flex-1 font-medium",children:a.exercise.name}),(0,b.jsx)(i.Input,{type:"number",value:a.sets,onChange:a=>{let b=[...V];b[c].sets=parseInt(a.target.value),W(b)},className:"w-16",placeholder:"Sets"}),(0,b.jsx)("span",{children:"x"}),(0,b.jsx)(i.Input,{value:a.reps,onChange:a=>{let b=[...V];b[c].reps=a.target.value,W(b)},className:"w-20",placeholder:"Reps"}),(0,b.jsx)(h.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{W(a=>a.filter((a,b)=>b!==c))},children:(0,b.jsx)(w.Trash2,{className:"h-4 w-4 text-red-500"})})]},c))})]}),(0,b.jsxs)(h.Button,{type:"submit",className:"w-full",disabled:P||0===V.length,children:[P&&(0,b.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Créer la session"]})]})]})]})]}),J&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Sessions totales"}),(0,b.jsx)(r.Dumbbell,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:J.totalSessions})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Cette semaine"}),(0,b.jsx)(y.Target,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:J.completedThisWeek})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Ce mois"}),(0,b.jsx)(t.Calendar,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:J.completedThisMonth})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Durée moyenne"}),(0,b.jsx)(z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[J.averageDuration," min"]})})]})]}),N?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin"})}):0===H.length?(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(r.Dumbbell,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Aucune session"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Créez la première session d'entraînement"}),(0,b.jsxs)(h.Button,{onClick:()=>S(!0),children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-4 w-4"}),"Créer une session"]})]})}):(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:H.map(a=>(0,b.jsxs)(g.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.name}),(0,b.jsx)(g.CardDescription,{children:a.sessionType})]}),(0,b.jsxs)(k.Badge,{className:C[a.status],children:["COMPLETED"===a.status&&(0,b.jsx)(v.CheckCircle2,{className:"h-3 w-3 mr-1"}),"IN_PROGRESS"===a.status&&(0,b.jsx)(u.Play,{className:"h-3 w-3 mr-1"}),a.status]})]})}),(0,b.jsxs)(g.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(r.Dumbbell,{className:"h-4 w-4"}),a.exercises.length," exercices"]}),a.duration&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(s.Clock,{className:"h-4 w-4"}),a.duration," min"]})]}),a.scheduledAt&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(t.Calendar,{className:"h-4 w-4"}),new Date(a.scheduledAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),a.rating&&(0,b.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((c,d)=>(0,b.jsx)(A.Star,{className:`h-4 w-4 ${d<a.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},d))})]})]},a.id))})]})}a.s(["default",()=>D],404604)}];

//# sourceMappingURL=app_dashboard_clients_%5Bid%5D_sessions_page_tsx_a15e3a63._.js.map