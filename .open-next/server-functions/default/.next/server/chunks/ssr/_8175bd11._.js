module.exports=[596221,a=>{"use strict";var b=a.i(404650);a.s(["Loader2",()=>b.default])},45701,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(278165),e=a.i(703130),f=a.i(340695),g=a.i(254161),h=a.i(277687),i=a.i(46864),j=a.i(170106);let k=(0,j.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var l=a.i(596221),m=a.i(641710),n=a.i(816201);let o=(0,j.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var p=a.i(807706);function q(){let{user:a}=(0,d.useUser)(),{toast:j}=(0,h.useToast)(),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(null);(0,c.useEffect)(()=>{a?.role==="ADMIN"&&w()},[a]);let w=async()=>{try{let a=await fetch("/api/admin/pros");if(!a.ok)throw Error("Failed to fetch");let b=await a.json();r(b)}catch(a){console.error("Error fetching pending pros:",a),j({title:"Erreur",description:"Impossible de charger les professionnels en attente",variant:"destructive"})}finally{t(!1)}},x=async a=>{v(a);try{if(!(await fetch(`/api/admin/pros/${a}/approve`,{method:"POST"})).ok)throw Error("Failed to approve");j({title:"Succès",description:"Le professionnel a été approuvé avec succès"}),w()}catch(a){console.error("Error approving pro:",a),j({title:"Erreur",description:"Impossible d'approuver le professionnel",variant:"destructive"})}finally{v(null)}},y=async a=>{v(a);try{if(!(await fetch(`/api/admin/pros/${a}/reject`,{method:"POST"})).ok)throw Error("Failed to reject");j({title:"Succès",description:"Le professionnel a été rejeté"}),w()}catch(a){console.error("Error rejecting pro:",a),j({title:"Erreur",description:"Impossible de rejeter le professionnel",variant:"destructive"})}finally{v(null)}};if(a?.role!=="ADMIN")return(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Accès refusé"}),(0,b.jsx)(e.CardDescription,{children:"Vous devez être administrateur pour accéder à cette page."})]})})});if(s)return(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});let z=q.filter(a=>"PENDING"===a.proStatus),A=q.filter(a=>"ACTIVE"===a.proStatus),B=q.filter(a=>"REJECTED"===a.proStatus);return(0,b.jsxs)("div",{className:"container mx-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Validation des Professionnels"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Validez ou rejetez les demandes d'accès professionnel"})]}),(0,b.jsxs)("div",{className:"grid gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Clock,{className:"h-5 w-5"}),(0,b.jsxs)(e.CardTitle,{children:["En attente (",z.length,")"]})]}),(0,b.jsx)(e.CardDescription,{children:"Professionnels en attente de validation"})]}),(0,b.jsx)(e.CardContent,{children:0===z.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun professionnel en attente"}):(0,b.jsx)("div",{className:"space-y-4",children:z.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(p.Avatar,{children:[(0,b.jsx)(p.AvatarImage,{src:a.picture||void 0}),(0,b.jsx)(p.AvatarFallback,{children:a.name?.charAt(0).toUpperCase()||a.email.charAt(0).toUpperCase()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.name||"Sans nom"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.email}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Inscrit le ",new Date(a.createdAt).toLocaleDateString("fr-FR")]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>y(a.id),disabled:u===a.id,children:u===a.id?(0,b.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k,{className:"h-4 w-4 mr-2"}),"Rejeter"]})}),(0,b.jsx)(f.Button,{size:"sm",onClick:()=>x(a.id),disabled:u===a.id,children:u===a.id?(0,b.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.UserCheck,{className:"h-4 w-4 mr-2"}),"Approuver"]})})]})]},a.id))})})]}),A.length>0&&(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.CheckCircle,{className:"h-5 w-5 text-green-500"}),(0,b.jsxs)(e.CardTitle,{children:["Approuvés (",A.length,")"]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:A.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(p.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(p.AvatarImage,{src:a.picture||void 0}),(0,b.jsx)(p.AvatarFallback,{children:a.name?.charAt(0).toUpperCase()||a.email.charAt(0).toUpperCase()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.name||"Sans nom"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.email})]})]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-800",children:"Actif"})]},a.id))})})]}),B.length>0&&(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o,{className:"h-5 w-5 text-red-500"}),(0,b.jsxs)(e.CardTitle,{children:["Rejetés (",B.length,")"]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:B.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(p.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(p.AvatarImage,{src:a.picture||void 0}),(0,b.jsx)(p.AvatarFallback,{children:a.name?.charAt(0).toUpperCase()||a.email.charAt(0).toUpperCase()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.name||"Sans nom"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.email})]})]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 dark:bg-red-950 dark:text-red-300 dark:border-red-800",children:"Rejeté"})]},a.id))})})]})]})]})}a.s(["default",()=>q],45701)}];

//# sourceMappingURL=_8175bd11._.js.map