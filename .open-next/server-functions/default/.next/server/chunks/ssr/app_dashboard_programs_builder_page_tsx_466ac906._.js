module.exports=[930179,a=>{"use strict";var b=a.i(187924),c=a.i(514727),d=a.i(572131),e=a.i(703130),f=a.i(340695),g=a.i(205522),h=a.i(917171),i=a.i(546893),j=a.i(254161),k=a.i(46470),l=a.i(887682),m=a.i(644010),n=a.i(915618),o=a.i(781560),p=a.i(835181),q=a.i(784581),r=a.i(596221),s=a.i(114548),t=a.i(587532),u=a.i(369012),v=a.i(633508),w=a.i(821374),x=a.i(501027),y=a.i(50429),z=a.i(277687),A=a.i(856696);let B={CHEST:"Pectoraux",BACK:"Dos",SHOULDERS:"Ã‰paules",BICEPS:"Biceps",TRICEPS:"Triceps",FOREARMS:"Avant-bras",ABS:"Abdos",OBLIQUES:"Obliques",QUADRICEPS:"Quadriceps",HAMSTRINGS:"Ischio-jambiers",GLUTES:"Fessiers",CALVES:"Mollets",LOWER_BACK:"Lombaires",TRAPS:"TrapÃ¨zes",FULL_BODY:"Full Body",CARDIO:"Cardio",STRETCHING:"Ã‰tirements"},C={CHEST:"ðŸ‹ï¸",BACK:"ðŸ”™",SHOULDERS:"ðŸ’ª",BICEPS:"ðŸ’ª",TRICEPS:"ðŸ’ª",FOREARMS:"ðŸ¤²",ABS:"ðŸŽ¯",OBLIQUES:"ðŸŽ¯",QUADRICEPS:"ðŸ¦µ",HAMSTRINGS:"ðŸ¦µ",GLUTES:"ðŸ‘",CALVES:"ðŸ¦¶",LOWER_BACK:"ðŸ”™",TRAPS:"ðŸ’ª",FULL_BODY:"ðŸƒ",CARDIO:"â¤ï¸",STRETCHING:"ðŸ§˜"},D={MACHINE:"Machine",BARBELL:"Barre",DUMBBELL:"HaltÃ¨res",CABLES:"CÃ¢bles",BODYWEIGHT:"Poids du corps",KETTLEBELL:"Kettlebell",RESISTANCE_BAND:"Ã‰lastiques",CARDIO_MACHINE:"Cardio",SMITH_MACHINE:"Smith Machine",PULLUP_BAR:"Barre de traction",BENCH:"Banc",NONE:"Aucun"},E={1:{label:"DÃ©butant",color:"bg-green-500"},2:{label:"Facile",color:"bg-lime-500"},3:{label:"IntermÃ©diaire",color:"bg-yellow-500"},4:{label:"AvancÃ©",color:"bg-orange-500"},5:{label:"Expert",color:"bg-red-500"}};function F({onSave:a,initialExercises:c=[],clientId:F}){let{toast:G}=(0,z.useToast)(),{activeOrganization:H}=(0,A.useOrganization)(),[I,J]=(0,d.useState)(!0),[K,L]=(0,d.useState)(!1),[M,N]=(0,d.useState)([]),[O,P]=(0,d.useState)({}),[Q,R]=(0,d.useState)(c),[S,T]=(0,d.useState)(""),[U,V]=(0,d.useState)(""),[W,X]=(0,d.useState)(""),[Y,Z]=(0,d.useState)("ALL"),[$,_]=(0,d.useState)("ALL"),[aa,ab]=(0,d.useState)([1,5]),[ac,ad]=(0,d.useState)(!1),ae=(0,d.useCallback)(async()=>{try{let a=await fetch("/api/exercises/grouped");if(a.ok){let b=await a.json();P(b);let c=Object.values(b).flat();N(c)}}catch(a){G({title:"Erreur",description:"Impossible de charger les exercices",variant:"destructive"})}finally{J(!1)}},[G]);(0,d.useEffect)(()=>{ae()},[ae]);let af=(0,d.useMemo)(()=>Array.from(new Set(M.map(a=>a.equipmentType))).sort(),[M]),ag=(0,d.useMemo)(()=>M.filter(a=>{let b=""===W||a.name.toLowerCase().includes(W.toLowerCase())||a.nameEn&&a.nameEn.toLowerCase().includes(W.toLowerCase()),c="ALL"===Y||a.muscleGroup===Y,d="ALL"===$||a.equipmentType===$,e=a.difficulty>=aa[0]&&a.difficulty<=aa[1];return b&&c&&d&&e}),[M,W,Y,$,aa]),ah=(0,d.useMemo)(()=>{let a={};return ag.forEach(b=>{a[b.muscleGroup]||(a[b.muscleGroup]=[]),a[b.muscleGroup].push(b)}),a},[ag]),ai=(a,b,c)=>{R(Q.map(d=>d.tempId===a?{...d,[b]:c}:d))},aj=async()=>{if(!S.trim())return void G({title:"Erreur",description:"Veuillez saisir un nom de programme",variant:"destructive"});if(0===Q.length)return void G({title:"Erreur",description:"Ajoutez au moins un exercice",variant:"destructive"});L(!0);try{let b={exercises:Q.map((a,b)=>({name:a.exercise.name,exerciseId:a.exercise.id,muscleGroup:a.exercise.muscleGroup,series:a.sets,reps:a.reps,rest:`${a.rest}s`,notes:a.notes,order:b}))};if(!(await fetch("/api/programs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,description:U,type:"SPORT",content:JSON.stringify(b),userId:F||null,organizationId:H?.id||null})})).ok)throw Error("Failed to save");G({title:"Programme crÃ©Ã©",description:"Le programme a Ã©tÃ© sauvegardÃ©"}),a&&a({name:S,description:U,exercises:Q}),T(""),V(""),R([])}catch(a){G({title:"Erreur",description:"Impossible de sauvegarder",variant:"destructive"})}finally{L(!1)}},ak=""!==W||"ALL"!==Y||"ALL"!==$||1!==aa[0]||5!==aa[1];return I?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)(e.Card,{className:"h-fit",children:[(0,b.jsxs)(e.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Dumbbell,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{children:"BibliothÃ¨que d'exercices"})]}),(0,b.jsxs)(j.Badge,{variant:"secondary",className:"text-sm",children:[ag.length," exercices"]})]}),(0,b.jsx)(e.CardDescription,{children:"Filtrez et ajoutez des exercices Ã  votre programme"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Rechercher un exercice...",value:W,onChange:a=>X(a.target.value),className:"pl-10 pr-10"}),W&&(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>X(""),children:(0,b.jsx)(v.X,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{variant:ac?"secondary":"outline",size:"sm",onClick:()=>ad(!ac),className:"gap-2",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4"}),"Filtres",ak&&(0,b.jsx)(j.Badge,{variant:"destructive",className:"h-5 w-5 p-0 flex items-center justify-center text-xs",children:"!"})]}),ak&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{X(""),Z("ALL"),_("ALL"),ab([1,5])},className:"text-muted-foreground",children:"RÃ©initialiser"})]}),ac&&(0,b.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/30 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(y.Target,{className:"h-3 w-3"})," Groupe musculaire"]}),(0,b.jsxs)(l.Select,{value:Y,onValueChange:Z,children:[(0,b.jsx)(l.SelectTrigger,{className:"h-9",children:(0,b.jsx)(l.SelectValue,{placeholder:"Tous"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"ALL",children:"Tous les groupes"}),Object.keys(O).map(a=>(0,b.jsxs)(l.SelectItem,{value:a,children:[C[a]," ",B[a]||a]},a))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(p.Dumbbell,{className:"h-3 w-3"})," Ã‰quipement"]}),(0,b.jsxs)(l.Select,{value:$,onValueChange:_,children:[(0,b.jsx)(l.SelectTrigger,{className:"h-9",children:(0,b.jsx)(l.SelectValue,{placeholder:"Tous"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"ALL",children:"Tous les Ã©quipements"}),af.map(a=>(0,b.jsx)(l.SelectItem,{value:a,children:D[a]||a},a))]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(h.Label,{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(x.Zap,{className:"h-3 w-3"})," DifficultÃ©: ",E[aa[0]]?.label," - ",E[aa[1]]?.label]}),(0,b.jsx)(m.Slider,{value:aa,onValueChange:ab,min:1,max:5,step:1,className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"DÃ©butant"}),(0,b.jsx)("span",{children:"Expert"})]})]})]}),(0,b.jsx)(k.ScrollArea,{className:"h-[400px]",children:0===ag.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)(p.Dumbbell,{className:"h-12 w-12 text-muted-foreground/30 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground font-medium",children:"Aucun exercice trouvÃ©"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Essayez de modifier vos filtres"})]}):(0,b.jsx)("div",{className:"space-y-4 pr-4",children:Object.entries(ah).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2 sticky top-0 bg-background/95 backdrop-blur py-1",children:[(0,b.jsx)("span",{className:"text-lg",children:C[a]}),(0,b.jsx)("h4",{className:"font-semibold text-sm",children:B[a]||a}),(0,b.jsx)(j.Badge,{variant:"outline",className:"text-xs",children:c.length})]}),(0,b.jsx)("div",{className:"space-y-2",children:c.map(a=>{let c=Q.some(b=>b.exercise.id===a.id);return(0,b.jsxs)("div",{className:`group flex items-center justify-between p-3 rounded-lg border transition-all cursor-pointer ${c?"bg-primary/10 border-primary/30":"hover:bg-muted/50 hover:border-primary/20"}`,onClick:()=>!c&&void(Q.some(b=>b.exercise.id===a.id)?G({title:"DÃ©jÃ  ajoutÃ©",description:"Cet exercice est dÃ©jÃ  dans votre programme",variant:"destructive"}):(R([...Q,{tempId:`temp-${Date.now()}-${Math.random()}`,exercise:a,sets:3,reps:"10",rest:60,notes:""}]),G({title:"Exercice ajoutÃ©",description:a.name}))),children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.name}),c&&(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs shrink-0",children:"AjoutÃ©"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1.5",children:[(0,b.jsx)(j.Badge,{variant:"outline",className:"text-xs",children:D[a.equipmentType]||a.equipmentType}),(0,b.jsxs)(j.Badge,{className:`text-xs text-white ${E[a.difficulty]?.color||"bg-gray-500"}`,children:[(0,b.jsx)(w.Star,{className:"h-3 w-3 mr-1"}),E[a.difficulty]?.label||`Niveau ${a.difficulty}`]})]})]}),!c&&(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity shrink-0 ml-2",children:(0,b.jsx)(n.Plus,{className:"h-4 w-4"})})]},a.id)})})]},a))})})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"DÃ©tails du programme"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Nom du programme"}),(0,b.jsx)(g.Input,{value:S,onChange:a=>T(a.target.value),placeholder:"Ex: Push Day, Full Body..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Description (optionnel)"}),(0,b.jsx)(i.Textarea,{value:U,onChange:a=>V(a.target.value),placeholder:"Description du programme...",rows:2})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center justify-between",children:["Exercices sÃ©lectionnÃ©s",(0,b.jsx)(j.Badge,{variant:Q.length>0?"default":"secondary",children:Q.length})]})}),(0,b.jsxs)(e.CardContent,{children:[0===Q.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(p.Dumbbell,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Ajoutez des exercices depuis la bibliothÃ¨que"})]}):(0,b.jsx)(k.ScrollArea,{className:"h-[350px] pr-4",children:(0,b.jsx)("div",{className:"space-y-3",children:Q.map((a,c)=>(0,b.jsxs)("div",{className:"p-3 rounded-lg border bg-muted/20 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.GripVertical,{className:"h-4 w-4 text-muted-foreground cursor-grab"}),(0,b.jsx)(j.Badge,{variant:"secondary",children:c+1}),(0,b.jsx)("span",{className:"font-medium",children:a.exercise.name})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>{var b;return b=a.tempId,void R(Q.filter(a=>a.tempId!==b))},className:"h-8 w-8 hover:bg-destructive/10",children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"SÃ©ries"}),(0,b.jsx)(g.Input,{type:"number",value:a.sets,onChange:b=>ai(a.tempId,"sets",parseInt(b.target.value)||0),className:"h-8"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"RÃ©pÃ©titions"}),(0,b.jsx)(g.Input,{value:a.reps,onChange:b=>ai(a.tempId,"reps",b.target.value),className:"h-8"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Repos (s)"}),(0,b.jsx)(g.Input,{type:"number",value:a.rest,onChange:b=>ai(a.tempId,"rest",parseInt(b.target.value)||0),className:"h-8"})]})]})]},a.tempId))})}),(0,b.jsxs)(f.Button,{onClick:aj,disabled:K||0===Q.length,className:"w-full mt-4",children:[K?(0,b.jsx)(r.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(s.Save,{className:"mr-2 h-4 w-4"}),"Sauvegarder le programme"]})]})]})]})]})}function G(){return(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(c.SidebarTrigger,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"CrÃ©er un Programme"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Construisez un programme sportif Ã  partir de la bibliothÃ¨que d'exercices"})]})]}),(0,b.jsx)(F,{})]})}a.s(["default",()=>G],930179)}];

//# sourceMappingURL=app_dashboard_programs_builder_page_tsx_466ac906._.js.map