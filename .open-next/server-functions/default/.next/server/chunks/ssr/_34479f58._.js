module.exports=[596221,a=>{"use strict";var b=a.i(404650);a.s(["Loader2",()=>b.default])},669520,a=>{"use strict";let b=(0,a.i(170106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],669520)},727023,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(278165),e=a.i(856696),f=a.i(703130),g=a.i(340695),h=a.i(596221),i=a.i(669520),j=a.i(277687),k=a.i(514727),l=a.i(887682);function m(){let{user:a}=(0,d.useUser)(),{organizations:m}=(0,e.useOrganization)(),{toast:n}=(0,j.useToast)(),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null);async function u(){if(!o)return void n({title:"Erreur",description:"Veuillez sélectionner une organisation",variant:"destructive"});r(!0),t(null);try{let a=await fetch("/api/programs/migrate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:o})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to migrate programs")}let b=await a.json();t(b),n({title:"Succès",description:b.message})}catch(a){console.error("Error migrating programs:",a),n({title:"Erreur",description:a instanceof Error?a.message:"Impossible de migrer les programmes",variant:"destructive"})}finally{r(!1)}}return a?.role!=="PRO"?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Accès refusé"}),(0,b.jsx)(f.CardDescription,{children:"Cette page est réservée aux professionnels"})]})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,b.jsx)(k.SidebarTrigger,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Migration des programmes"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Migrez vos programmes existants vers une organisation"})]})]}),(0,b.jsxs)(f.Card,{className:"max-w-2xl",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Migrer les programmes"}),(0,b.jsx)(f.CardDescription,{children:"Cette action va associer tous vos programmes sans organisation à l'organisation sélectionnée. Les programmes existants avec une organisation ne seront pas modifiés."})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Organisation cible"}),(0,b.jsxs)(l.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Sélectionner une organisation"})}),(0,b.jsx)(l.SelectContent,{children:m.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsx)(g.Button,{onClick:u,disabled:!o||q,className:"w-full",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Migration en cours..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.RefreshCw,{className:"mr-2 h-4 w-4"}),"Migrer les programmes"]})}),s&&(0,b.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Résultat de la migration"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:s.message})]})]})]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=_34479f58._.js.map